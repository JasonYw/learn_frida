(function(){"use strict";var globalThis=new Function("return this;")();globalThis.globalThis=globalThis;var __commonJS=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},require_core=__commonJS((function(t,e){function r(){}var n=null,o={};e.exports=function(t){var e=t.setTimeout;function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._deferredState=0,this._state=0,this._value=null,this._deferreds=null,t!==r&&u(t,this)}function i(t,r){for(;3===t._state;)t=t._value;if(a._onHandle&&a._onHandle(t),0===t._state)return 0===t._deferredState?(t._deferredState=1,void(t._deferreds=r)):1===t._deferredState?(t._deferredState=2,void(t._deferreds=[t._deferreds,r])):void t._deferreds.push(r);!function(t,r){e((function(){var e=1===t._state?r.onFulfilled:r.onRejected;if(null!==e){var a=function(t,e){try{return t(e)}catch(t){return n=t,o}}(e,t._value);a===o?_(r.promise,n):s(r.promise,a)}else 1===t._state?s(r.promise,t._value):_(r.promise,t._value)}))}(t,r)}function s(t,e){if(e===t)return _(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var r=function(t){try{return t.then}catch(t){return n=t,o}}(e);if(r===o)return _(t,n);if(r===t.then&&e instanceof a)return t._state=3,t._value=e,void p(t);if("function"==typeof r)return void u(r.bind(e),t)}t._state=1,t._value=e,p(t)}function _(t,e){t._state=2,t._value=e,a._onReject&&a._onReject(t,e),p(t)}function p(t){if(1===t._deferredState&&(i(t,t._deferreds),t._deferreds=null),2===t._deferredState){for(var e=0;e<t._deferreds.length;e++)i(t,t._deferreds[e]);t._deferreds=null}}function c(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function u(t,e){var r=!1,a=function(t,e,r){try{t(e,r)}catch(t){return n=t,o}}(t,(function(t){r||(r=!0,s(e,t))}),(function(t){r||(r=!0,_(e,t))}));r||a!==o||(r=!0,_(e,n))}return a._onHandle=null,a._onReject=null,a._noop=r,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,n){return new t.constructor((function(o,s){var _=new a(r);_.then(o,s),i(t,new c(e,n,_))}))}(this,t,e);var n=new a(r);return i(this,new c(t,e,n)),n},a}})),require_es6_extensions=__commonJS((function(t,e){e.exports=function(t){var e=s(!0),r=s(!1),n=s(null),o=s(void 0),a=s(0),i=s("");function s(e){var r=new t(t._noop);return r._state=1,r._value=e,r}t.resolve=function(_){if(_ instanceof t)return _;if(null===_)return n;if(void 0===_)return o;if(!0===_)return e;if(!1===_)return r;if(0===_)return a;if(""===_)return i;if("object"==typeof _||"function"==typeof _)try{var p=_.then;if("function"==typeof p)return new t(p.bind(_))}catch(e){return new t((function(t,r){r(e)}))}return s(_)};var _=function(t){return"function"==typeof Array.from?(_=Array.from,Array.from(t)):(_=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(t))};return t.all=function(e){var r=_(e);return new t((function(e,n){if(0===r.length)return e([]);var o=r.length;function a(i,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof t&&s.then===t.prototype.then){for(;3===s._state;)s=s._value;return 1===s._state?a(i,s._value):(2===s._state&&n(s._value),void s.then((function(t){a(i,t)}),n))}var _=s.then;if("function"==typeof _)return void new t(_.bind(s)).then((function(t){a(i,t)}),n)}r[i]=s,0==--o&&e(r)}for(var i=0;i<r.length;i++)a(i,r[i])}))},t.reject=function(e){return new t((function(t,r){r(e)}))},t.race=function(e){return new t((function(r,n){_(e).forEach((function(e){t.resolve(e).then(r,n)}))}))},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.done=function(t,e){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,(function(t){setTimeout((function(){throw t}),0)}))},t.prototype.finally=function(e){return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},t}})),require_rejection_tracking=__commonJS((function(t,e){e.exports=function(t,e,r){var n=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,t._onHandle=null,t._onReject=null}function i(t,e){return e.some((function(e){return t instanceof e}))}return{enable:function(s){s=s||{},o&&a(),o=!0;var _=0,p=0,c={};function u(t){var e;(s.allRejections||i(c[t].error,s.whitelist||n))&&(c[t].displayId=p++,s.onUnhandled?(c[t].logged=!0,s.onUnhandled(c[t].displayId,c[t].error)):(c[t].logged=!0,c[t].displayId,(((e=c[t].error)&&(e.stack||e))+"").split("\n").forEach((function(t){}))))}return t._onHandle=function(t){var e;2===t._state&&c[t._rejectionId]&&(c[t._rejectionId].logged?(e=t._rejectionId,c[e].logged&&(s.onHandled?s.onHandled(c[e].displayId,c[e].error):c[e].onUnhandled)):r&&r(c[t._rejectionId].timeout),delete c[t._rejectionId])},t._onReject=function(t,r){0===t._deferredState&&(t._rejectionId=_++,c[t._rejectionId]={displayId:null,error:r,timeout:e(u.bind(null,t._rejectionId),i(r,n)?100:2e3),logged:!1})},t},disable:a}}})),require_src=__commonJS((function(t,e){var r=require_core(),n=require_es6_extensions(),o=require_rejection_tracking();new Function("return this")().getPromise=e.exports.getPromise=function(t){var e=t.setTimeout,a=t.onUnhandled,i=t.clearTimeout,s=function(t){return e(t,0)},_=r({setTimeout:s});return _=n(_),_=o(_,s,i).enable({allRejections:!0,onUnhandled:a})}}));require_src();var runtime=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function _(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{_({},"")}catch(t){_=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),i=new x(n||[]);return a._invoke=function(t,e,r){var n=u;return function(o,a){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw a;return D()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=S(i,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var _=c(t,e,r);if("normal"===_.type){if(n=r.done?f:l,_.arg===d)continue;return{value:_.arg,done:r.done}}"throw"===_.type&&(n=f,r.method="throw",r.arg=_.arg)}}}(t,r,i),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=p;var u="suspendedStart",l="suspendedYield",h="executing",f="completed",d={};function v(){}function y(){}function E(){}var m={};m[a]=function(){return this};var g=Object.getPrototypeOf,A=g&&g(g(w([])));A&&A!==r&&n.call(A,a)&&(m=A);var R=E.prototype=v.prototype=Object.create(m);function C(t){["next","throw","return"].forEach((function(e){_(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,a,i,s){var _=c(t[o],t,a);if("throw"!==_.type){var p=_.arg,u=p.value;return u&&"object"==typeof u&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(u).then((function(t){p.value=t,i(p)}),(function(t){return r("throw",t,i,s)}))}s(_.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function S(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=c(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function w(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:D}}function D(){return{value:e,done:!0}}return y.prototype=R.constructor=E,E.constructor=y,y.displayName=_(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,_(t,s,"GeneratorFunction")),t.prototype=Object.create(R),t},t.awrap=function(t){return{__await:t}},C(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new b(p(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(R),_(R,s,"Generator"),R[a]=function(){return this},R.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var _=n.call(i,"catchLoc"),p=n.call(i,"finallyLoc");if(_&&p){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(_){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),d}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:w(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(t){Function("r","regeneratorRuntime = r")(runtime)}var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e_1,_a;function __values(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function __spreadArray(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t}var lifeCycles=["onLoad","onShow","onHide","onReady","onDestroy","onError","onFirstScreen"],lifeCycleFun={},noop=function(){},ErrorCode;try{for(var lifeCycles_1=__values(lifeCycles),lifeCycles_1_1=lifeCycles_1.next();!lifeCycles_1_1.done;lifeCycles_1_1=lifeCycles_1.next()){var name_1=lifeCycles_1_1.value;lifeCycleFun[name_1]=noop}}catch(t){e_1={error:t}}finally{try{lifeCycles_1_1&&!lifeCycles_1_1.done&&(_a=lifeCycles_1.return)&&_a.call(lifeCycles_1)}finally{if(e_1)throw e_1.error}}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.UNKNOWN=1]="UNKNOWN",t[t.NODE_NOT_FOUND=2]="NODE_NOT_FOUND",t[t.METHOD_NOT_FOUND=3]="METHOD_NOT_FOUND",t[t.PARAM_INVALID=4]="PARAM_INVALID",t[t.SELECTOR_NOT_SUPPORTED=5]="SELECTOR_NOT_SUPPORTED",t[t.NO_UI_FOR_NODE=6]="NO_UI_FOR_NODE"}(ErrorCode||(ErrorCode={}));var LYNX_CORE={filename:"lynx_core",slot:"unknown_commit_hash"},componentLifeCycles=["created","attached","ready","moved","detached"],DEFAULT_ENTRY="__CARD__",CARD_CONFIG_STR="__card_config_",CARD_CONFIG_THEME="theme",CARD_CONFIG_THEME_UPDATED="onThemeChanged",REACT_JS_STATE_VERSION_KEY="$$jsStateVersion",REACT_NATIVE_STATE_VERSION_KEY="$$nativeStateVersion",REACT_RENDER_ERROR_KEY="$$renderError",JS_RENDER_ERROR="JS_RENDER_ERROR",LEPUS_RENDER_ERROR="LEPUS_RENDER_ERROR",ROOT_COMPONENT_ID="0",ShareDataSubject=function(){function t(){this.observersFunc=[]}return t.prototype.registerObserver=function(t){if(this.observersFunc.includes(t))return nativeConsole.log("Subject: Observer has been attached already.");this.observersFunc.push(t)},t.prototype.removeObserver=function(t){var e=this.observersFunc.indexOf(t);if(-1===e)return nativeConsole.log("Subject: Nonexistent observer.");this.observersFunc.splice(e,1)},t.prototype.notifyDataChange=function(t){this.observersFunc.forEach((function(e){if("function"==typeof e)try{e(t)}catch(t){nativeConsole.log("SharedData change and notifyDataChange error info:"+t)}}))},t}(),_global=function(){return this||(0,eval)("this")}();_global.multiApps={},_global.currentAppId="",_global.globComponentRegistPath="",_global.sharedData={},_global.globDynamicComponentEntry=DEFAULT_ENTRY,_global.shareDataSubject=new ShareDataSubject,_global.TaroLynx={},_global.bundleSupportLoadScript=!0;var loadScript=_global.loadScript,BaseError=function(t){function e(e,r){var n=t.call(this,e)||this;return r&&(n.stack=r),n}return __extends(e,t),e}(Error),InternalError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.kind="INTERNAL_ERROR",e}return __extends(e,t),e}(BaseError),UserError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.kind="USER_ERROR",e}return __extends(e,t),e}(BaseError),UserValidateError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="USER_VALIDATE_ERROR",e}return __extends(e,t),e}(UserError),UserRuntimeError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="USER_RUNTIME_ERROR",e}return __extends(e,t),e}(UserError),InternalRuntimeError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="INTERNAL_RUNTIME_ERROR",e}return __extends(e,t),e}(InternalError),InvokeError=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="INVOKE_ERROR",e}return __extends(e,t),e}(InternalError),AppServiceEngineKnownError=function(t){function e(e){var r=t.call(this,"APP-SERVICE-Engine: "+e)||this;return r.type="AppServiceEngineKnownError",r}return __extends(e,t),e}(Error),ttConsole=_global.nativeConsole,LynxJSBI=_global.LynxJSBI;function hasProperty(t,e){return Object.prototype.hasOwnProperty.call(t||{},e)}function getDataType(t){var e=typeof t;return"object"!==e?e:Array.isArray(t)?"array":null==t?"null":t instanceof Date?"date":t instanceof RegExp?"regExp":"object"}function isString(t){return"string"===getDataType(t)}function isObject(t){return"object"===getDataType(t)}function isFunction(t){return"function"===getDataType(t)}function isArray(t){return"array"===getDataType(t)}function isNull(t){return null===t}function isUndefined(t){return void 0===t}function isNullOrUndef(t){return isUndefined(t)||isNull(t)}var ThirdScriptError=function(t){function e(e){var r=t.call(this,""+e)||this;return r.type="ThirdScriptError",r}return __extends(e,t),e}(Error),AppServiceSdkKnownError=function(t){function e(e){var r=t.call(this,"APP-SERVICE-SDK: + "+e)||this;return r.type="AppServiceSdkKnownError",r}return __extends(e,t),e}(Error);function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function noop$1(){}function forEachRight(t,e){if(!Array.isArray(t))throw new Error("forEachRight ERROR: first params must be array.");for(var r=t.length-1;r>=0;r--)e(t[r])}function formatException(t){var e=eventFromException(t);return e.sdk=addSdkInfo(),e.platform="javascript",e}function addSdkInfo(){return{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:"5.15.5"}],version:"5.15.5",integrations:["InboundFilters","FunctionToString","Breadcrumbs","GlobalHandlers","LinkedErrors","UserAgent"]}}function eventFromException(t){var e;return isError(t)&&(addExceptionMechanism(e=eventFromStacktrace(computeStackTrace(t)),{handled:!0,type:"generic"}),e.level="error"),e}function addExceptionMechanism(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(r){t.exception.values[0].mechanism[r]=e[r]}))}catch(t){}}var UNKNOWN_FUNCTION="?",chrome=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/;function computeStackTrace(t){var e=null,r=null==t?void 0:t.framesToPop;try{if(e=computeStackTraceFromStackProp(t))return popFrames(e,r)}catch(t){}return{message:extractMessage(t),name:null==t?void 0:t.name,stack:[],failed:!0}}function computeStackTraceFromStackProp(t){var e,r,n,o=[],a=t.stack.split("\n");if(!t||!t.stack)return null;for(var i=0;i<a.length;++i){if(r=chrome.exec(a[i])){var s=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(e=chromeEval.exec(r[2]))&&(r[2]=e[1],r[3]=e[2],r[4]=e[3]),n={url:r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],func:r[1]||UNKNOWN_FUNCTION,args:s?[r[2]]:[],line:r[3]?+Number(r[3]):null,column:r[4]?+Number(r[4]):null}}else if(r=winjs.exec(a[i]))n={url:r[2],func:r[1]||UNKNOWN_FUNCTION,args:[],line:+Number(r[3]),column:r[4]?+Number(r[4]):null};else{if(!(r=gecko.exec(a[i])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(e=geckoEval.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=e[1],r[4]=e[2],r[5]=""):0!==i||r[5]||void 0===t.columnNumber||(o[0].column=t.columnNumber+1),n={url:r[3],func:r[1]||UNKNOWN_FUNCTION,args:r[2]?r[2].split(","):[],line:r[4]?+Number(r[4]):null,column:r[5]?+Number(r[5]):null}}!n.func&&n.line&&(n.func=UNKNOWN_FUNCTION),o.push(n)}return o.length?{message:extractMessage(t),name:t.name,stack:o}:null}function extractMessage(t){var e=null==t?void 0:t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function popFrames(t,e){try{return Object.assign({},t,{stack:t.stack.slice(e)})}catch(e){return t}}function eventFromStacktrace(t){return{exception:{values:[exceptionFromStacktrace(t)]}}}function isError(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(t,Error)}}function isInstanceOf(t,e){try{return t instanceof e}catch(t){return!1}}function exceptionFromStacktrace(t){var e=prepareFramesForEvent(t.stack),r={type:t.name,value:t.message};return(null==e?void 0:e.length)&&(r.stacktrace={frames:e}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function prepareFramesForEvent(t){if(!t||!t.length)return[];var e=t,r=e[0].func||"",n=e[e.length-1].func||"";return-1===r.indexOf("captureMessage")&&-1===r.indexOf("captureException")||(e=e.slice(1)),-1!==n.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).slice(0,50).reverse()}var RUNTIME=function(t){return t.filename};function collectTags(t,e,r){return{lib_version:"unknown_build_version",version_code:"unknown_version",run_type:RUNTIME(r),extra:t,error_type:e}}function sentryReport(t,e,r){var n=t.rawError;try{nativeConsole.log("prod sentry data:",t),e.reportException(JSON.stringify(t),n.stack)}catch(t){nativeConsole.error("sentryReport error:",null==t?void 0:t.message)}}function reportError(t,e,r){var n=null!=r?r:{},o=n.runType,a=void 0===o?LYNX_CORE:o,i=n.originError,s=n.__sourcemap__release__,_=t.stack;t.stack=formatStack(t,a);var p=formatException(t);try{var c=collectTags(t.message,t.name,a),u=appendTags(t,createBeforeSend(p,a,{__sourcemap__release__:s}),c,a);u.rawError={stack:_,message:t.message},sentryReport(u,e,i)}catch(t){nativeConsole.error("reportError err:\n",t)}}function legacyReportError(t,e,r,n,o){return void 0===r&&(r=LYNX_CORE),reportError(t,e,{runType:r,originError:n,__sourcemap__release__:o.__sourcemap__release__})}function reportThrowError(t){var e=t.error,r=t.nativeApp,n=t.runType,o=void 0===n?LYNX_CORE:n;reportError(e,r,{originError:t.rawError,runType:o,__sourcemap__release__:t.__sourcemap__release__})}function appendTags(t,e,r,n){var o="USER_ERROR"===t.kind?"USER_ERROR":"INTERNAL_ERROR";return{sentry:__assign(__assign({},e),{tags:r}),pid:o,url:"file://"+RUNTIME(n)+".js"}}function formatStack(t,e){return t.stack?t.stack.split("\n").filter((function(t){return t.split(":").length>2})).map((function(t){if(t.includes("file://"))return t;var r=e.filename+".js";return t.replace(r,"file://"+r)})).join("\n"):""}function createBeforeSend(t,e,r){var n,o,a,i=null===(a=null===(o=null===(n=t.exception)||void 0===n?void 0:n.values)||void 0===o?void 0:o[0])||void 0===a?void 0:a.stacktrace;return(null==i?void 0:i.frames)&&i.frames.forEach((function(t){var n=e.slot,o=e.filename;-1!==t.filename.indexOf(o)?(t.filename=o+"."+n+".js",t.release=n):t.release=null==r?void 0:r.__sourcemap__release__})),t}function wrapUserFunction(t,e,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("USER_ERROR",t,r,e,n):noop$1}function wrapFunction(t,e,r,n,o){return void 0===t&&(t="INTERNAL_ERROR"),function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];try{return r.apply(this,a)}catch(a){var s=e+" \n"+a.message;"onError"!==r.name&&"function"==typeof n.onError&&n.onError("Card "+r.name+" exec error:"+s+"\n"+a.stack);var _="INTERNAL_ERROR"===t?new InternalRuntimeError(s,a.stack):new UserRuntimeError(s,a.stack);nativeConsole.log("wrapError-"+e,_),reportError(_,n._nativeApp,{runType:o,__sourcemap__release__:n.__sourcemap__release__})}}}function wrapInnerFunction(t,e,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("INTERNAL_ERROR",t,r,e,n):noop$1}var shallowClone=function(t){var e={};return isObject(t)&&Object.keys(t).forEach((function(r){e[r]=t[r]})),e},shallowMergeEx=function(t,e,r){void 0===r&&(r=!1);var n={};return isObject(t)&&Object.keys(t).forEach((function(e){n[e]=t[e]})),isObject(e)&&Object.keys(e).forEach((function(t){isNull(e[t])&&r||(n[t]=e[t])})),n},deepClone=function(){function t(t,e){return null!=e&&t instanceof e}var e,r,n;try{e=Map}catch(t){e=function(){}}try{r=Set}catch(t){r=function(){}}try{n=Promise}catch(t){n=function(){}}function o(a,s,_,p,c){"object"==typeof s&&(_=s.depth,p=s.prototype,c=s.includeNonEnumerable,s=s.circular);var u=[],l=[],h="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===_&&(_=1/0),function a(_,f){if(null===_)return null;if(0===f)return _;var d,v;if("object"!=typeof _)return _;if(t(_,e))d=new e;else if(t(_,r))d=new r;else if(t(_,n))d=new n((function(t,e){_.then((function(e){t(a(e,f-1))}),(function(t){e(a(t,f-1))}))}));else if(o.__isArray(_))d=[];else if(o.__isRegExp(_))d=new RegExp(_.source,i(_)),_.lastIndex&&(d.lastIndex=_.lastIndex);else if(o.__isDate(_))d=new Date(_.getTime());else{if(h&&Buffer.isBuffer(_))return d=Buffer.allocUnsafe?Buffer.allocUnsafe(_.length):new Buffer(_.length),_.copy(d),d;t(_,Error)?d=Object.create(_):void 0===p?(v=Object.getPrototypeOf(_),d=Object.create(v)):(d=Object.create(p),v=p)}if(s){var y=u.indexOf(_);if(-1!==y)return l[y];u.push(_),l.push(d)}for(var E in t(_,e)&&_.forEach((function(t,e){var r=a(e,f-1),n=a(t,f-1);d.set(r,n)})),t(_,r)&&_.forEach((function(t){var e=a(t,f-1);d.add(e)})),_){var m=void 0;v&&(m=Object.getOwnPropertyDescriptor(v,E)),m&&null==m.set||(d[E]=a(_[E],f-1))}if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(_);for(E=0;E<g.length;E++){var A=g[E];(!(C=Object.getOwnPropertyDescriptor(_,A))||C.enumerable||c)&&(d[A]=a(_[A],f-1),C.enumerable||Object.defineProperty(d,A,{enumerable:!1}))}}if(c){var R=Object.getOwnPropertyNames(_);for(E=0;E<R.length;E++){var C,b=R[E];(null==(C=Object.getOwnPropertyDescriptor(_,b))?void 0:C.enumerable)||(d[b]=a(_[b],f-1),Object.defineProperty(d,b,{enumerable:!1}))}}return d}(a,_)}function a(t){return Object.prototype.toString.call(t)}function i(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=a,o.__isDate=function(t){return"object"==typeof t&&"[object Date]"===a(t)},o.__isArray=function(t){return"object"==typeof t&&"[object Array]"===a(t)},o.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===a(t)},o.__getRegExpFlags=i,o}(),NodeRef=function(){function t(t,e,r,n,o){this._selectorName=r,n&&n.length>0?this._ancestorSelectorNames=__spreadArray([],__read(n)):this._ancestorSelectorNames=[],this._rootComponentId=e,this._nativeLynxUIModule=t,this._isCallByRefId=o}return t.prototype.getNodeRef=function(e){return new t(this._nativeLynxUIModule,this._rootComponentId,e,__spreadArray(__spreadArray([],__read(this._ancestorSelectorNames)),[this._selectorName]),this._isCallByRefId)},t.prototype.invoke=function(t){this._nativeLynxUIModule.invokeUIMethod(this._rootComponentId,__spreadArray(__spreadArray([],__read(this._ancestorSelectorNames)),[this._selectorName]),t.method,Object.assign({_isCallByRefId:this._isCallByRefId},t.params),(function(e){0===e.code?t.success&&t.success(e.data):t.fail&&t.fail(e)}))},t.prototype.scrollIntoView=function(t){void 0===t&&(t=!0);var e={};if("boolean"==typeof t)e=t?{behavior:"auto",block:"start",inline:"nearest"}:{behavior:"auto",block:"end",inline:"nearest"};else{if("object"!=typeof t)throw new Error("scrollIntoView only support boolean or object");e=t}this.invoke({method:"scrollIntoView",params:{scrollIntoViewOptions:e},fail:function(t){nativeConsole.error("NodeRef.scrollIntoView failed","ErrorCode: "+t.code)}})},t}(),compPrefix=1,globalId=1,propsIdMap={};function genCompPrefix(){return String(compPrefix++)}function genPropsId(t){return propsIdMap[t]||(propsIdMap[t]=String(globalId++)),propsIdMap[t]}var dataTypeSet=new Set(["string","number","array","object","boolean","null","function"]);function eq(t,e){return t===e||t!=t&&e!=e}var reserveKey=new Set(["__globalProps","SystemInfo"]),deepEqual=function(t,e,r){if(t===e)return!0;var n=getDataType(t),o=getDataType(e);if(r||(r=new WeakMap),n===o){if("array"===n){if(t.length!==e.length)return!1;if(r.has(t)&&r.has(e))return r.get(t)===e;r.set(t,e),r.set(e,t);var a=!0;return t.some((function(t,n){return!(a=deepEqual(t,e[n],r))})),r.delete(t),r.delete(e),a}if("object"===n){var i=Object.keys(t);if(i.length!==Object.keys(e).length)return!1;if(r.has(t)&&r.has(e))return r.get(t)===e;r.set(t,e),r.set(e,t);var s=!0;return i.some((function(n){return!(s=deepEqual(t[n],e[n],r))})),r.delete(t),r.delete(e),s}return"date"===n?eq(+t,+e):"regExp"===n?t.toString()===e.toString():eq(t,e)}return!1},diffData=function(t,e,r){var n={};if(t===e)return n;if(isObject(e)){var o=isObject(t),a=Object.keys(e);if(a.length)(r&&r.length?r:a).forEach((function(r){var a=e[r];dataTypeSet.has(getDataType(a))&&(o&&deepEqual(t[r],a)||(n[r]=a))}))}return n},filterReactComponentData=function(t){var e={};return isObject(t)&&Object.keys(t).forEach((function(r){var n=t[r],o=getDataType(n);dataTypeSet.has(o)&&!reserveKey.has(r)&&(e[r]=n)})),e},hasJSOnlyData=function(t){return!!isObject(t)&&Object.keys(t).some((function(e){var r=getDataType(t[e]);return!dataTypeSet.has(r)}))},filterTTData=function(t,e){var r={};if(isObject(e)){var n=new Set(t);Object.keys(e).forEach((function(t){n.has(t)||(r[t]=e[t])}))}return r},Animation=function(){function t(e){this.effect=e,this.id="__lynx-inner-js-animation-"+t.count++}return t.prototype.cancel=function(){this.effect.target.cancelAnimate(this)},t.prototype.pause=function(){this.effect.target.pauseAnimate(this)},t.prototype.play=function(){this.effect.target.playAnimate(this)},t.count=0,t}(),KeyframeEffect=function(t,e,r){this.target=t,this.keyframes=e,this.options=r},Element=function(){function t(t,e,r){this._root=t,this._idSelector="#"+e,this._lynx=r,this._element=void 0}return t.prototype.ensureElement=function(){this._element||(this._element=this._lynx.createElement(this._root,this._idSelector))},t.prototype.animate=function(t,e){this.ensureElement();var r=new Animation(new KeyframeEffect(this,t,e));return this._element.animate(0,r.id,t,e),r},t.prototype.playAnimate=function(t){this._element.animate(1,t.id,void 0,void 0)},t.prototype.pauseAnimate=function(t){this._element.animate(2,t.id,void 0,void 0)},t.prototype.cancelAnimate=function(t){this._element.animate(3,t.id,void 0,void 0)},t.prototype.finishAnimate=function(t){this._element.animate(4,t.id,void 0,void 0)},t.prototype.setProperty=function(t,e){var r;this.ensureElement(),"string"==typeof t&&"string"==typeof e?this._element.setProperty(((r={})[t]=e,r)):"object"==typeof t&&this._element.setProperty(t)},t}(),IdentifierType;!function(t){t[t.ID_SELECTOR=0]="ID_SELECTOR",t[t.REF_ID=1]="REF_ID",t[t.UNIQUE_ID=2]="UNIQUE_ID"}(IdentifierType||(IdentifierType={}));var SelectorQuery=function(){function t(t,e,r,n){this._component=t,this._taskQueue=e,this._nativeApp=r,this._uiModule=n}return t.fromQuery=function(e,r){return new t(null!=r?r:e._component,e._taskQueue.slice(),e._nativeApp,e._uiModule)},t.newEmptyQuery=function(e,r,n){return new t(null!=n?n:"",[],e,r)},t.newQueryWithTask=function(t,e){var r=this.fromQuery(t);return r._taskQueue.push(e),r},t.prototype.in=function(t){return t.createSelectorQuery(this)},t.prototype.select=function(t){return new NodesRef(this,{type:0,identifier:t,component_id:this._component,first_only:!0})},t.prototype.selectRoot=function(){return this.select("")},t.prototype.selectUniqueID=function(t){return new NodesRef(this,{type:2,identifier:t.toString(),component_id:this._component,first_only:!0})},t.prototype.exec=function(){for(var t=0;t<this._taskQueue.length;++t)this._taskQueue[t](this._nativeApp,this._uiModule)},t}(),NodesRef=function(){function t(t,e){this._nodeSelectToken=e,this._selectorQuery=t}return t.prototype.invoke=function(t){var e=this;return SelectorQuery.newQueryWithTask(this._selectorQuery,(function(r,n){var o,a=function(e){0===e.code?t.success&&t.success(e.data):t.fail&&t.fail(e)};0==e._nodeSelectToken.type?e._nodeSelectToken.first_only?n.invokeUIMethodForSelectorQuery(e._nodeSelectToken.component_id,e._nodeSelectToken.identifier,t.method,null!==(o=t.params)&&void 0!==o?o:{},a):a({code:5,data:"selectAll not supported for invoke method"}):a({code:5,data:"only searching by css selector is supported"})}))},t.prototype.path=function(t){var e=this;return SelectorQuery.newQueryWithTask(this._selectorQuery,(function(r,n){r.getPathInfo(e._nodeSelectToken.type,e._nodeSelectToken.identifier,e._nodeSelectToken.component_id,e._nodeSelectToken.first_only,(function(e){t&&t(e.data,e.status)}))}))},t.prototype.setNativeProps=function(t){var e=this;return SelectorQuery.newQueryWithTask(this._selectorQuery,(function(r,n){r.setNativeProps(e._nodeSelectToken.type,e._nodeSelectToken.identifier,e._nodeSelectToken.component_id,e._nodeSelectToken.first_only,t)}))},t}();function getErrorBoundary(t,e){for(var r=e._reactAppInstance._getComponent(t);r&&"string"==typeof r.parentId;){if(r.parentId===ROOT_COMPONENT_ID)return;if((r=e._reactAppInstance._getComponent(r.parentId)).$hasDerivedErrorFunction)return r}}function checkReactShouldAbortRenderError(t){var e,r;return(null===(e=null==t?void 0:t.state)||void 0===e?void 0:e[REACT_RENDER_ERROR_KEY])===JS_RENDER_ERROR||(null===(r=null==t?void 0:t.state)||void 0===r?void 0:r[REACT_RENDER_ERROR_KEY])===LEPUS_RENDER_ERROR}function handleExceptionInJSInternal(t,e,r){var n,o={message:null==t?void 0:t.message,stack:null==t?void 0:t.stack,name:JS_RENDER_ERROR},a=getErrorBoundary(e,r);if(!a)throw t;if(!checkReactShouldAbortRenderError(a)){if(a.$hasDerivedErrorFunction){var i=a.$class.getDerivedStateFromError(o);if(isObject(i)){var s=__assign(__assign({},i),((n={})[REACT_RENDER_ERROR_KEY]=JS_RENDER_ERROR,n));a.state=Object.assign(a.state,s),a.nativeApp.updateComponentData(a.componentId,s,null)}}a.$catchError=o,r.$throwError=o}}function parsePath(t){if("string"!==getDataType(t)){var e="path should be string";throw nativeConsole.error("TypeError",e),new AppServiceEngineKnownError(e)}for(var r=!1,n=!1,o=t.length,a=[],i="",s=0,_=0;_<o;_++){var p=t[_];if("\\"===p)_+1<o&&("."===t[_+1]||"["===t[_+1]||"]"===t[_+1])?(i+=t[_+1],_++):i+="\\";else if("."===p)i&&(a.push(i),i="");else if("["===p){if(i&&(a.push(i),i=""),0===a.length)throw nativeConsole.error("DataPathError","Path can not start with []: "+t),new AppServiceEngineKnownError("Path can not start with []: "+t);n=!0,r=!1}else if("]"===p){if(!r)throw nativeConsole.error("DataPathError","Must have number in []: "+t),new AppServiceEngineKnownError("Must have number in []: "+t);n=!1,a.push(s),s=0}else if(n){if(p<"0"||p>"9")throw nativeConsole.error("DataPathError","Only number 0-9 could inside []: "+t),new AppServiceEngineKnownError("Only number 0-9 could inside []: "+t);r=!0,s=10*s+p.charCodeAt(0)-48}else i+=p}if(n)throw nativeConsole.error("DataPathError","[] should appear in pair: "+t),new AppServiceEngineKnownError("[] should appear in pair: "+t);if(i&&a.push(i),0===a.length)throw nativeConsole.error("DataPathError","Path can not be empty"),new AppServiceEngineKnownError("Path can not be empty");return a}function getObjectByPath(t,e){for(var r={},n=void 0,o=parsePath(e),a=t,i=0;i<o.length;i++){if(Number(o[i]==o[i]&&o[i]%1==0)){if(!Array.isArray(a))throw nativeConsole.error("DataPathError', 'Expected Array but not. key: "+e),new AppServiceEngineKnownError("DataPathError', 'Expected Array but not. key: "+e)}else if("object"!==getDataType(a))throw nativeConsole.error("DataPathError', 'Expected Object but not. key: "+e),new AppServiceEngineKnownError("DataPathError', 'Expected Object but not. key: "+e);n=o[i],r=a,a=a[o[i]]}return{obj:r,key:n}}var BaseInstance=function(){function t(t){this._queue=[],this.componentId="";var e=null!=t?t:{},r=e.type,n=e.componentId,o=void 0===n?"":n,a=e.resolvedPromise,i=e.__sourcemap__release__;this._pendingState=null,this._cbs=null,this._type=r,this.componentId=o,this.resolvedPromise=a,this.__sourcemap__release__=i}return t.prototype.nextTick=function(t){this.resolvedPromise.then(t)},t.prototype.updateData=function(t){for(var e in t){void 0===t[e]&&nativeConsole.error("setData field "+e+" to undefined not work");var r=getObjectByPath(this.data,e),n=r.obj,o=r.key;n&&(n[o]=deepClone(t[e]))}},t.prototype.dataQueueUpdate=function(t,e,r,n){var o=this,a=o._pendingState,i=t._queue;if(isNullOrUndef(a))o._pendingState=e;else for(var s in e)({}).hasOwnProperty.call(e,s)&&(a[s]=e[s]);i.includes(o)||i.push(o),isFunction(r)&&(Array.isArray(o._cbs)||(o._cbs=[]),o._cbs.push(r.bind(o))),t._microTaskPending||(t._microTaskPending=!0,this.nextTick((function(){var e,r=[];t._microTaskPending=!1;var o=function(t){var e=t._type,n=t.componentId,o=t._cbs,a=t._pendingState,i=callbackMerge.bind(t,o);t._pendingState=null,t._cbs=null,r.push({type:e,componentId:n,data:a,callback:i})};if(n)t._queue=[],i.forEach(o);else for(;e=i.pop();)o(e);t._nativeApp.batchedUpdateData(r)})))},t}(),ComponentState;function callbackMerge(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)t[e]()}!function(t){t[t.Created=0]="Created",t[t.Mounted=1]="Mounted",t[t.Unmounted=2]="Unmounted"}(ComponentState||(ComponentState={}));var ReactComponent=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;return r.prevProps={},r.prevState={},r.nextProps={},r.nextState={},r.$init=!1,r.$cardInit=!1,r.$prefix="",r.componentPath="",r.entryName="",r.globalProps=null,r._asyncSetStateMicroTaskPending=!1,r.$jsStateVersion=0,r.$nativeStateVersion=0,r.$componentState=0,r.$isInCtor=!0,r.parentId="",r.$catchError=null,r.$throwError=null,r.state={},r.props=e,r.prevProps={},r.prevState={},r.$prefix=genCompPrefix(),r.setComponentConfig(r.constructor),r.$refs=[],r.$pureData={},r._stateQueue=[],r._uiModule=r._nativeApp.nativeModuleProxy.LynxUIMethodModule,r}return __extends(e,t),Object.defineProperty(e.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),e.prototype.executeJSRender=function(){var t=this._createData();return this.bindRef(),t},e.prototype.handleExceptionInJS=function(t){handleExceptionInJSInternal(t,this.componentId,this)},e.prototype.bindRef=function(){var t=this;!this.$refs||this.$refs.length<1||this.$refs.forEach((function(e){t.bindComponent(e)}))},e.prototype.bindComponent=function(t){var e=null;"native"===t.type?e=this.getNodeRef(t.refId,!0):"com"===t.type&&isString(this.$pureData[t.refId])&&(e=this._reactAppInstance._getComponent(this.$pureData[t.refId]));var r=typeof t.ref;isObject(e)&&("function"===r?t.ref.call(this,e):"object"===r&&"current"in t.ref&&(t.ref.current=e,t.ref.id=this.componentId))},e.prototype.bindSingleRef=function(t){var e=this.$refs.find((function(e){return e.refId===t}));isObject(e)&&this.bindComponent(e)},e.prototype.updateTheme=function(t,e){var r;void 0===e&&(e=!1);var n=this;try{var o=getDataType(t);if("object"!==o)throw new Error("updateTheme's first param must be object, you pass "+o);var a={};e?Object.assign(a,t):Object.assign(a,n.theme,t),Object.keys(a).forEach((function(t){a[t]||delete a[t]})),n._nativeApp.updateData({__card_config_:{theme:a}}),n[CARD_CONFIG_THEME]=a,"function"==typeof n[CARD_CONFIG_THEME_UPDATED]&&n[CARD_CONFIG_THEME_UPDATED](a)}catch(t){var i=t||{},s=i.message,_=i.stack,p=new InternalRuntimeError("updateTheme error: "+s,_);null===(r=n._reactAppInstance)||void 0===r||r.handleError(p)}},e.prototype.setState=function(t,e){var r,n;if(nativeConsole.profile("ReactComponent::setState::"+this._type=="card"?"card":this.componentPath),this.$isInCtor){var o=this.$class.__config.initNativeStateVersion;nativeConsole.alog("has setState in Ctor, change $nativeStateVersion from "+this.$nativeStateVersion+" to "+o),isUndefined(o)||(this.$nativeStateVersion=o)}var a=this,i=null;try{var s=getDataType(t);if("function"===s)i=t(a.state,a.props);else{if("object"!==s)throw new Error("setState's first param must be object/function, you pass "+s);i=t}var _=getDataType(e);if(e&&"function"!==_)throw new Error("setState's second param must be function, you pass "+_);(null===(r=this._reactAppInstance.lynx._switches)||void 0===r?void 0:r.asyncSetState)?this.setStateInternalAsync(i,e):this.setStateInternal(i,e)}catch(t){var p=t||{},c=p.message,u=p.stack,l=new InternalRuntimeError("setState error: "+c,u);null===(n=a._reactAppInstance)||void 0===n||n.handleError(l)}finally{nativeConsole.profileEnd()}},e.prototype.setStateInternalAsync=function(t,e){var r=this;this._stateQueue.push({state:t,callback:e}),this._asyncSetStateMicroTaskPending||(this._asyncSetStateMicroTaskPending=!0,this._reactAppInstance.resolvedPromise.then((function(){r._asyncSetStateMicroTaskPending=!1;var t={},e=[];r._stateQueue.forEach((function(r){var n=r.state,o=r.callback;Object.assign(t,n),e.push(o)})),r._stateQueue=[];r.setStateInternal(t,(function(){e.forEach((function(t){wrapUserFunction("at setState/async",r,t).bind(r)()}))}))})))},e.prototype.setStateInternal=function(t,e){var r,n=this;try{this.nextProps=this.props,isFunction(this.shouldComponentUpdate)?this.nextState=deepClone(this.state):this.nextState=this.state,n.nextState=Object.assign(n.nextState,t);var o=null,a={};n.$hasDerivedFunction&&(o=n.$class.getDerivedStateFromProps(n.nextProps,n.nextState),a=diffData(this.nextState,o),n.nextState=Object.assign(n.nextState,o||{}));var i=!0;if(isFunction(this.shouldComponentUpdate)&&(i=n.shouldComponentUpdate(this.nextProps,this.nextState)),this.state=this.nextState,!i){var s=Object.assign({},t,a);return void(Object.keys(s).length&&(s.$$shouldComponentUpdate=!1,this.dataQueueUpdate(n,s,wrapUserFunction("at setState/dataQueueUpdate",n,e).bind(n))))}var _=n.executeJSRender();if(n.$throwError)return;var p=diffData(this.state,_);n.state=Object.assign(n.state,_);var c=Object.assign({},t,a,p);Object.keys(c).length&&this.dataQueueUpdate(n,c,wrapUserFunction("at setState/dataQueueUpdate",n,e).bind(n))}catch(t){var u=t||{},l=u.message,h=u.stack,f=new InternalRuntimeError("setState error: "+l,h);null===(r=n._reactAppInstance)||void 0===r||r.handleError(f)}},e.prototype.updateDataToNative=function(t){t&&Object.keys(t).length&&this.dataQueueUpdate(this,t,(function(){}))},e.prototype.dataQueueUpdate=function(e,r,n){var o,a,i=null===(a=this._reactAppInstance.lynx._switches)||void 0===a?void 0:a.enableFixBatchedUpdateOrder;e=i&&this._reactAppInstance.appInstance||this,this.$jsStateVersion+=1;var s=((o={})[REACT_JS_STATE_VERSION_KEY]=this.$jsStateVersion,o[REACT_NATIVE_STATE_VERSION_KEY]=this.$nativeStateVersion,o);Object.assign(r,s),t.prototype.dataQueueUpdate.call(this,e,r,n,i)},e.prototype.nextTick=function(t){var e;(null===(e=this._reactAppInstance.lynx._switches)||void 0===e?void 0:e.enableReactBatchedUpdate)||"iOS"!==(_global.SystemInfo||{}).platform?this._reactAppInstance.resolvedPromise.then(t):t()},e.prototype.registerModule=function(t,e){this._reactAppInstance.registerModule(t,e)},e.prototype.setComponentConfig=function(t){this.$class=t,this.$hasDerivedFunction=isFunction(t.getDerivedStateFromProps),this.$hasDidUpdateLifecycle=this.componentDidUpdate!==e.prototype.componentDidUpdate,this.$hasDerivedErrorFunction=isFunction(t.getDerivedStateFromError),this.$hasDidCatchLifecycle=this.componentDidCatch!==e.prototype.componentDidCatch;var r=t.__config,n=r.appInstance.lynx;this._type=r.$type,this._nativeApp=r.appInstance.nativeApp,this._reactAppInstance=r.appInstance,this.__sourcemap__release__=r.__sourcemap__release__,this.componentId=r.componentId,this.setGlobalProps(n,r.initData),this.GlobalEventEmitter=this._reactAppInstance.GlobalEventEmitter},e.prototype.getJSModule=function(t){return this._reactAppInstance.getJSModule(t)},e.prototype.getNodeRef=function(t,e){return"component"===this._type?new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,this.componentId,t,[],e):new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",t,[],e)},e.prototype.getNodeRefFromRoot=function(t){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",t)},e.prototype.createSelectorQuery=function(t){return t?SelectorQuery.fromQuery(t,this.componentId):SelectorQuery.newEmptyQuery(this._nativeApp,this._uiModule,this.componentId)},e.prototype.getPathFromTarget=function(t,e){this.createSelectorQuery().selectUniqueID(t.uid).path(e).exec()},e.prototype.getElementById=function(t){return new Element(""===this.componentId?"card":this.componentId,t,this._reactAppInstance.lynx)},e.prototype.addGlobalEventListener=function(t,e,r){this.getJSModule("GlobalEventEmitter").addListener(t,e,r)},e.prototype.setSharedData=function(t,e){_global.sharedData[t]=e},e.prototype.getSharedData=function(t){return _global.sharedData[t]},e.prototype.setGlobalProps=function(t,e){t&&!t.__globalProps&&e&&e.__globalProps&&(t.__globalProps=e.__globalProps)},e.prototype.triggerEvent=function(t,e,r){var n;void 0===e&&(e={}),void 0===r&&(r={});try{var o=this.componentId;this._nativeApp.triggerComponentEvent(t,{eventDetail:e,eventOption:r,componentId:o})}catch(t){var a=t||{},i=a.message,s=a.stack,_=new InternalRuntimeError("trigger event error: "+(i="triggerEvent error: "+i),s);null===(n=this._reactAppInstance)||void 0===n||n.handleError(_)}},e.prototype.componentDidCatch=function(t){},e.prototype.componentDidMount=function(){},e.prototype.componentWillUnmount=function(){},e.prototype.componentDidUpdate=function(t,e,r){},e.prototype.componentDidShow=function(){},e.prototype.componentDidHide=function(){},e}(BaseInstance),propsMap=function(){function t(){this._map={}}return t.prototype.set=function(t,e){void 0===t&&(t={}),this._map[e]=t},t.prototype.getProps=function(t){return this._map[t]},t.prototype.deleteProps=function(t){delete this._map[t]},t.prototype.clear=function(){this._map={}},t}(),HookType,currentIndex,appInstance,options,currentHookType;function isFunctionComponent(t){return t&&t.$_isFunctionComponent}function getCurComponent(){return appInstance}function invokeOrReturn(t,e){return"function"==typeof e?e(t):e}function invokeCleanup(t){"function"==typeof t._cleanup&&t._cleanup()}function invokeEffect(t){t._cleanup=t._value()}function argsChanged(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}function getHookState(t){var e=getCurComponent(),r=e.__hooks||(e.__hooks={_list:[],_pendingEffects:[]});return t>=r._list.length&&r._list.push({_type:currentHookType}),currentHookType=HookType.none,r._list[t]}function mountHooks(t,e){appInstance=t,options=e||{}}function resetHooks(t){currentIndex=0,appInstance=t}function executeEffects(t){var e=t.__hooks;e&&(e._pendingEffects.forEach(invokeCleanup),e._pendingEffects.forEach(invokeEffect),e._pendingEffects=[])}function cleanUpHooks(t){if(t&&t.__hooks)try{t.__hooks._list.forEach(invokeCleanup)}catch(t){options.catchError(t)}}function useEffect(t,e){currentHookType=HookType.useEffect;var r=getCurComponent(),n=getHookState(currentIndex++);!options._skipEffects&&argsChanged(n._args,e)&&(n._value=t,n._args=e,r.__hooks._pendingEffects.push(n))}function useReducer(t,e,r){currentHookType===HookType.none&&(currentHookType=HookType.useReducer);var n=getCurComponent(),o=getHookState(currentIndex++);return o._reducer=t,o._component||(o._value=[r?r(e):invokeOrReturn(void 0,e),function(t){var e=o._reducer(o._value[0],t);o._value[0]!==e&&(o._value=[e,o._value[1]],o._component.setHookState())}],o._component=n),o._value}function useState(t){return currentHookType=HookType.useState,useReducer(invokeOrReturn,t,null)}function useMemo(t,e){currentHookType===HookType.none&&(currentHookType=HookType.useMemo);var r=getHookState(currentIndex++);return argsChanged(r._args,e)&&(r._value=t(),r._args=e,r._factory=t),r._value}function useCallback(t,e){return currentHookType=HookType.useCallback,useMemo((function(){return t}),e)}function useRef(t){return currentHookType=HookType.useRef,useMemo((function(){return{current:t,id:null}}),[])}function useInstance(){return getCurComponent()}function syncInsHookState(t,e,r){if(void 0===r&&(r=!1),t&&t.$_hookStateKeys&&"object"==typeof e){var n=t.$_hookStateKeys;n.length&&Object.keys(e).filter((function(t){return n.includes(t)})).forEach((function(o){var a=null;if(!r||!isNull(e[o])){var i=n.findIndex((function(t){return t===o}));if(-1!=i)(a=(t.__hooks&&t.__hooks._list?t.__hooks._list.filter((function(t){return t._type===HookType.useState||t._type===HookType.useReducer})):[])[i])&&(a._value[0]=e[o])}}))}}!function(t){t[t.none=0]="none",t[t.useState=1]="useState",t[t.useReducer=2]="useReducer",t[t.useEffect=3]="useEffect",t[t.useMemo=4]="useMemo",t[t.useCallback=5]="useCallback",t[t.useRef=6]="useRef"}(HookType||(HookType={}));var Hooks={useState:useState,useReducer:useReducer,useEffect:useEffect,useMemo:useMemo,useCallback:useCallback,useRef:useRef,mountHooks:mountHooks,cleanUpHooks:cleanUpHooks,executeEffects:executeEffects,resetHooks:resetHooks,syncInsHookState:syncInsHookState,useInstance:useInstance},ReactFcComponent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.executeJSRender=function(){return Hooks.resetHooks(this),this._createData()},e.prototype.setHookState=function(){var t=this;this.batching||(this.batching=!0,this._reactAppInstance.resolvedPromise.then((function(){t.batching=!1,t.setHookStateInternal()})))},e.prototype.setHookStateInternal=function(){var t=this;try{var e=t.executeJSRender();if(t.$throwError)return;var r=diffData(this.state,e);t.state=Object.assign(t.state,e),Object.keys(r).length&&this.updateDataToNative(r)}catch(t){var n=t||{},o=n.message,a=n.stack;this._reactAppInstance.handleError(new InternalRuntimeError("setHookState error: "+o,a),t)}},e}(ReactComponent);function eventWrapper(t){t.prototype.addEventListener=function(t,e){if(this._handlers||(this._handlers={}),this.triggerEvent||(this.triggerEvent=function(t,e){var r=this;void 0===e&&(e={});if(e.target=this,e.type=t,e.preventDefault=function(){},e.stopPropagation=function(){},!this._handlers)return;var n=this._handlers[t];n&&n.length&&n.forEach((function(t){t.call(r,e)}))}.bind(this)),e){var r=this._handlers[t];r?r.push(e):this._handlers[t]=[e]}},t.prototype.removeEventListener=function(t,e){if(this._handlers){var r=this._handlers[t];if(r){var n=Array.prototype.findIndex.call(r,(function(t){return e===t}));-1!=n&&r.splice(n,1)}}},t.prototype.dispatchEvent=function(t){var e=this,r=t.type;if(t.target=this,"function"==typeof this["on"+r]&&this["on"+r](t),this._handlers&&r in this._handlers){var n=this._handlers[r];n&&n.length&&n.forEach((function(r){r.call(e,t)}))}}}var commandBufferCreator=function(t){if(t._commandBuffer)return t._commandBuffer;var e=t._commandBufferImpl,r=new Uint8Array(e.commands),n=new Float32Array(e.commands),o=new Int32Array(e.commands),a=new Uint32Array(e.commands),i=e.flushCommandBuffer;a[0]=1;var s=40960;var _={activeTexture:function(t){var e=a[0];a[e]=1,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},attachShader:function(t,r){var n=a[0];a[n]=2,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t._ptr_low,a[n+4]=t._ptr_high,e.objects.push(t),a[n+5]=r._ptr_low,a[n+6]=r._ptr_high,e.objects.push(r),n+=7,a[0]=n,n>s&&i()},bindBuffer:function(t,r){var n=a[0];a[n]=3,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,a[n+4]=null==r?void 0:r._ptr_low,a[n+5]=null==r?void 0:r._ptr_high,e.objects.push(r),n+=6,a[0]=n,n>s&&i()},bindFramebuffer:function(t,r){var n=a[0];a[n]=4,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,a[n+4]=null==r?void 0:r._ptr_low,a[n+5]=null==r?void 0:r._ptr_high,e.objects.push(r),n+=6,a[0]=n,n>s&&i()},bindRenderbuffer:function(t,r){var n=a[0];a[n]=5,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,a[n+4]=null==r?void 0:r._ptr_low,a[n+5]=null==r?void 0:r._ptr_high,e.objects.push(r),n+=6,a[0]=n,n>s&&i()},bindTexture:function(t,r){var n=a[0];a[n]=6,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,a[n+4]=null==r?void 0:r._ptr_low,a[n+5]=null==r?void 0:r._ptr_high,e.objects.push(r),n+=6,a[0]=n,n>s&&i()},blendColor:function(t,e,r,o){var _=a[0];a[_]=7,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,n[_+3]=t,n[_+4]=e,n[_+5]=r,n[_+6]=o,_+=7,a[0]=_,_>s&&i()},blendEquation:function(t){var e=a[0];a[e]=8,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},blendEquationSeparate:function(t,e){var r=a[0];a[r]=9,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e,r+=5,a[0]=r,r>s&&i()},blendFunc:function(t,e){var r=a[0];a[r]=10,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e,r+=5,a[0]=r,r>s&&i()},blendFuncSeparate:function(t,e,r,n){var o=a[0];a[o]=11,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=t,a[o+4]=e,a[o+5]=r,a[o+6]=n,o+=7,a[0]=o,o>s&&i()},bufferData:function(t,e,n){var _=a[0];!e||e.byteLength&&_+Math.ceil(e.byteLength/4)>s?this.bufferData_(t,e,n):(a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,void 0===e.byteLength?function(t,e,r){var n=a[0];a[n]=12,a[n+3]=t,o[n+4]=e,a[n+5]=r,n+=6,a[0]=n,n>s&&i()}(t,e,n):ArrayBuffer.isView(e)?function(t,e,n){var o=a[0];a[o]=13,a[o+3]=t,a[o+4]=e.byteLength;var _=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);a[o+5]=n,o+=6,r.set(_,4*o),o+=Math.ceil(e.byteLength/4),a[0]=o,o>s&&i()}(t,e,n):function(t,e,n){var o=a[0];a[o]=14,a[o+3]=t,a[o+4]=e.byteLength;var _=new Uint8Array(e);a[o+5]=n,o+=6,r.set(_,4*o),o+=Math.ceil(e.byteLength/4),a[0]=o,o>s&&i()}(t,e,n))},bufferSubData:function(t,e,n){var _=a[0];!n||!n.byteLength||_+Math.ceil(n.byteLength/4)>s?this.bufferSubData_(t,e,n):(a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,ArrayBuffer.isView(n)?function(t,e,n){var _=a[0];a[_]=15,a[_+3]=t,o[_+4]=e,a[_+5]=n.byteLength;var p=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);_+=6,r.set(p,4*_),_+=Math.ceil(n.byteLength/4),a[0]=_,_>s&&i()}(t,e,n):function(t,e,n){var _=a[0];a[_]=16,a[_+3]=t,o[_+4]=e,a[_+5]=n.byteLength;var p=new Uint8Array(n);_+=6,r.set(p,4*_),_+=Math.ceil(n.byteLength/4),a[0]=_,_>s&&i()}(t,e,n))},clear:function(t){var e=a[0];a[e]=17,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,(e>s||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,i())},clearColor:function(t,e,r,o){var _=a[0];a[_]=18,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,n[_+3]=t,n[_+4]=e,n[_+5]=r,n[_+6]=o,_+=7,a[0]=_,_>s&&i()},clearDepth:function(t){var e=a[0];a[e]=19,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,n[e+3]=t,e+=4,a[0]=e,e>s&&i()},clearStencil:function(t){var e=a[0];a[e]=20,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,o[e+3]=t,e+=4,a[0]=e,e>s&&i()},colorMask:function(t,e,r,n){var o=a[0];a[o]=21,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=t,a[o+4]=e,a[o+5]=r,a[o+6]=n,o+=7,a[0]=o,o>s&&i()},compileShader:function(t){var r=a[0];a[r]=22,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t._ptr_low,a[r+4]=t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},copyTexImage2D:function(t,e,r,n,_,p,c,u){var l=a[0];a[l]=23,a[l+1]=this._ptr_low,a[l+2]=this._ptr_high,a[l+3]=t,o[l+4]=e,a[l+5]=r,o[l+6]=n,o[l+7]=_,o[l+8]=p,o[l+9]=c,o[l+10]=u,l+=11,a[0]=l,l>s&&i()},copyTexSubImage2D:function(t,e,r,n,_,p,c,u){var l=a[0];a[l]=24,a[l+1]=this._ptr_low,a[l+2]=this._ptr_high,a[l+3]=t,o[l+4]=e,o[l+5]=r,o[l+6]=n,o[l+7]=_,o[l+8]=p,o[l+9]=c,o[l+10]=u,l+=11,a[0]=l,l>s&&i()},cullFace:function(t){var e=a[0];a[e]=25,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},deleteBuffer:function(t){var r=a[0];a[r]=26,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},deleteFramebuffer:function(t){var r=a[0];a[r]=27,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},deleteProgram:function(t){var r=a[0];a[r]=28,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},deleteRenderbuffer:function(t){var r=a[0];a[r]=29,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},deleteShader:function(t){var r=a[0];a[r]=30,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},deleteTexture:function(t){var r=a[0];a[r]=31,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},depthFunc:function(t){var e=a[0];a[e]=32,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},depthMask:function(t){var e=a[0];a[e]=33,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},depthRange:function(t,e){var r=a[0];a[r]=34,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,n[r+3]=t,n[r+4]=e,r+=5,a[0]=r,r>s&&i()},detachShader:function(t,r){var n=a[0];a[n]=35,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t._ptr_low,a[n+4]=t._ptr_high,e.objects.push(t),a[n+5]=r._ptr_low,a[n+6]=r._ptr_high,e.objects.push(r),n+=7,a[0]=n,n>s&&i()},disable:function(t){var e=a[0];a[e]=36,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},disableVertexAttribArray:function(t){var e=a[0];a[e]=37,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},drawArrays:function(t,e,r){var n=a[0];a[n]=38,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,o[n+4]=e,o[n+5]=r,n+=6,a[0]=n,(n>s||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,i())},drawElements:function(t,e,r,n){var _=a[0];a[_]=39,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=t,o[_+4]=e,a[_+5]=r,o[_+6]=n,_+=7,a[0]=_,(_>s||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,i())},enable:function(t){var e=a[0];a[e]=40,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},enableVertexAttribArray:function(t){var e=a[0];a[e]=41,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},flush:function(){var t=a[0];a[t]=42,a[t+1]=this._ptr_low,a[t+2]=this._ptr_high,t+=3,a[0]=t,(t>s||!this._drew_in_this_frame)&&(this._drew_in_this_frame=!0,i())},framebufferRenderbuffer:function(t,r,n,o){var _=a[0];a[_]=43,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=t,a[_+4]=r,a[_+5]=n,a[_+6]=null==o?void 0:o._ptr_low,a[_+7]=null==o?void 0:o._ptr_high,e.objects.push(o),_+=8,a[0]=_,_>s&&i()},framebufferTexture2D:function(t,r,n,_,p){var c=a[0];a[c]=44,a[c+1]=this._ptr_low,a[c+2]=this._ptr_high,a[c+3]=t,a[c+4]=r,a[c+5]=n,a[c+6]=null==_?void 0:_._ptr_low,a[c+7]=null==_?void 0:_._ptr_high,e.objects.push(_),o[c+8]=p,c+=9,a[0]=c,c>s&&i()},frontFace:function(t){var e=a[0];a[e]=45,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},generateMipmap:function(t){var e=a[0];a[e]=46,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},hint:function(t,e){var r=a[0];a[r]=47,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e,r+=5,a[0]=r,r>s&&i()},lineWidth:function(t){var e=a[0];a[e]=48,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,n[e+3]=t,e+=4,a[0]=e,e>s&&i()},linkProgram:function(t){var r=a[0];a[r]=49,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t._ptr_low,a[r+4]=t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},pixelStorei:function(t,e){var r=a[0];a[r]=50,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,o[r+4]=e,r+=5,a[0]=r,r>s&&i()},polygonOffset:function(t,e){var r=a[0];a[r]=51,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,n[r+3]=t,n[r+4]=e,r+=5,a[0]=r,r>s&&i()},renderbufferStorage:function(t,e,r,n){var _=a[0];a[_]=52,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=t,a[_+4]=e,o[_+5]=r,o[_+6]=n,_+=7,a[0]=_,_>s&&i()},sampleCoverage:function(t,e){var r=a[0];a[r]=53,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,n[r+3]=t,a[r+4]=e,r+=5,a[0]=r,r>s&&i()},scissor:function(t,e,r,n){var _=a[0];a[_]=54,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=e,o[_+5]=r,o[_+6]=n,_+=7,a[0]=_,_>s&&i()},stencilFunc:function(t,e,r){var n=a[0];a[n]=55,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,o[n+4]=e,a[n+5]=r,n+=6,a[0]=n,n>s&&i()},stencilFuncSeparate:function(t,e,r,n){var _=a[0];a[_]=56,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=t,a[_+4]=e,o[_+5]=r,a[_+6]=n,_+=7,a[0]=_,_>s&&i()},stencilMask:function(t){var e=a[0];a[e]=57,a[e+1]=this._ptr_low,a[e+2]=this._ptr_high,a[e+3]=t,e+=4,a[0]=e,e>s&&i()},stencilMaskSeparate:function(t,e){var r=a[0];a[r]=58,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e,r+=5,a[0]=r,r>s&&i()},stencilOp:function(t,e,r){var n=a[0];a[n]=59,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,a[n+4]=e,a[n+5]=r,n+=6,a[0]=n,n>s&&i()},stencilOpSeparate:function(t,e,r,n){var o=a[0];a[o]=60,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=t,a[o+4]=e,a[o+5]=r,a[o+6]=n,o+=7,a[0]=o,o>s&&i()},texParameterf:function(t,e,r){var o=a[0];a[o]=61,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=t,a[o+4]=e,n[o+5]=r,o+=6,a[0]=o,o>s&&i()},texParameteri:function(t,e,r){var n=a[0];a[n]=62,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=t,a[n+4]=e,o[n+5]=r,n+=6,a[0]=n,n>s&&i()},uniform1f:function(t,r){var o=a[0];a[o]=63,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=null==t?void 0:t._ptr_low,a[o+4]=null==t?void 0:t._ptr_high,e.objects.push(t),n[o+5]=r,o+=6,a[0]=o,o>s&&i()},uniform1fv:function(t,r){var o=a[0];a[o]=64,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=null==t?void 0:t._ptr_low,a[o+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[o+5]=r.length,o+=6,n.set(r,o),o+=r.length,a[0]=o,o>s&&i()},uniform1i:function(t,r){var n=a[0];a[n]=65,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=null==t?void 0:t._ptr_low,a[n+4]=null==t?void 0:t._ptr_high,e.objects.push(t),o[n+5]=r,n+=6,a[0]=n,n>s&&i()},uniform1iv:function(t,r){var n=a[0];a[n]=66,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=null==t?void 0:t._ptr_low,a[n+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[n+5]=r.length,n+=6,o.set(r,n),n+=r.length,a[0]=n,n>s&&i()},uniform2f:function(t,r,o){var _=a[0];a[_]=67,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=null==t?void 0:t._ptr_low,a[_+4]=null==t?void 0:t._ptr_high,e.objects.push(t),n[_+5]=r,n[_+6]=o,_+=7,a[0]=_,_>s&&i()},uniform2fv:function(t,r){var o=a[0];a[o]=68,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=null==t?void 0:t._ptr_low,a[o+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[o+5]=r.length,o+=6,n.set(r,o),o+=r.length,a[0]=o,o>s&&i()},uniform2i:function(t,r,n){var _=a[0];a[_]=69,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=null==t?void 0:t._ptr_low,a[_+4]=null==t?void 0:t._ptr_high,e.objects.push(t),o[_+5]=r,o[_+6]=n,_+=7,a[0]=_,_>s&&i()},uniform2iv:function(t,r){var n=a[0];a[n]=70,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=null==t?void 0:t._ptr_low,a[n+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[n+5]=r.length,n+=6,o.set(r,n),n+=r.length,a[0]=n,n>s&&i()},uniform3f:function(t,r,o,_){var p=a[0];a[p]=71,a[p+1]=this._ptr_low,a[p+2]=this._ptr_high,a[p+3]=null==t?void 0:t._ptr_low,a[p+4]=null==t?void 0:t._ptr_high,e.objects.push(t),n[p+5]=r,n[p+6]=o,n[p+7]=_,p+=8,a[0]=p,p>s&&i()},uniform3fv:function(t,r){var o=a[0];a[o]=72,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=null==t?void 0:t._ptr_low,a[o+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[o+5]=r.length,o+=6,n.set(r,o),o+=r.length,a[0]=o,o>s&&i()},uniform3i:function(t,r,n,_){var p=a[0];a[p]=73,a[p+1]=this._ptr_low,a[p+2]=this._ptr_high,a[p+3]=null==t?void 0:t._ptr_low,a[p+4]=null==t?void 0:t._ptr_high,e.objects.push(t),o[p+5]=r,o[p+6]=n,o[p+7]=_,p+=8,a[0]=p,p>s&&i()},uniform3iv:function(t,r){var n=a[0];a[n]=74,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=null==t?void 0:t._ptr_low,a[n+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[n+5]=r.length,n+=6,o.set(r,n),n+=r.length,a[0]=n,n>s&&i()},uniform4f:function(t,r,o,_,p){var c=a[0];a[c]=75,a[c+1]=this._ptr_low,a[c+2]=this._ptr_high,a[c+3]=null==t?void 0:t._ptr_low,a[c+4]=null==t?void 0:t._ptr_high,e.objects.push(t),n[c+5]=r,n[c+6]=o,n[c+7]=_,n[c+8]=p,c+=9,a[0]=c,c>s&&i()},uniform4fv:function(t,r){var o=a[0];a[o]=76,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=null==t?void 0:t._ptr_low,a[o+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[o+5]=r.length,o+=6,n.set(r,o),o+=r.length,a[0]=o,o>s&&i()},uniform4i:function(t,r,n,_,p){var c=a[0];a[c]=77,a[c+1]=this._ptr_low,a[c+2]=this._ptr_high,a[c+3]=null==t?void 0:t._ptr_low,a[c+4]=null==t?void 0:t._ptr_high,e.objects.push(t),o[c+5]=r,o[c+6]=n,o[c+7]=_,o[c+8]=p,c+=9,a[0]=c,c>s&&i()},uniform4iv:function(t,r){var n=a[0];a[n]=78,a[n+1]=this._ptr_low,a[n+2]=this._ptr_high,a[n+3]=null==t?void 0:t._ptr_low,a[n+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[n+5]=r.length,n+=6,o.set(r,n),n+=r.length,a[0]=n,n>s&&i()},uniformMatrix2fv:function(t,r,o){var _=a[0];a[_]=79,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=null==t?void 0:t._ptr_low,a[_+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[_+5]=r,a[_+6]=o.length,_+=7,n.set(o,_),_+=o.length,a[0]=_,_>s&&i()},uniformMatrix3fv:function(t,r,o){var _=a[0];a[_]=80,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=null==t?void 0:t._ptr_low,a[_+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[_+5]=r,a[_+6]=o.length,_+=7,n.set(o,_),_+=o.length,a[0]=_,_>s&&i()},uniformMatrix4fv:function(t,r,o){var _=a[0];a[_]=81,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=null==t?void 0:t._ptr_low,a[_+4]=null==t?void 0:t._ptr_high,e.objects.push(t),a[_+5]=r,a[_+6]=o.length,_+=7,n.set(o,_),_+=o.length,a[0]=_,_>s&&i()},useProgram:function(t){var r=a[0];a[r]=82,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},validateProgram:function(t){var r=a[0];a[r]=83,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t._ptr_low,a[r+4]=t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},vertexAttrib1f:function(t,e){var r=a[0];a[r]=84,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,n[r+4]=e,r+=5,a[0]=r,r>s&&i()},vertexAttrib1fv:function(t,e){var r=a[0];a[r]=85,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e.length,r+=5,n.set(e,r),r+=e.length,a[0]=r,r>s&&i()},vertexAttrib2f:function(t,e,r){var o=a[0];a[o]=86,a[o+1]=this._ptr_low,a[o+2]=this._ptr_high,a[o+3]=t,n[o+4]=e,n[o+5]=r,o+=6,a[0]=o,o>s&&i()},vertexAttrib2fv:function(t,e){var r=a[0];a[r]=87,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e.length,r+=5,n.set(e,r),r+=e.length,a[0]=r,r>s&&i()},vertexAttrib3f:function(t,e,r,o){var _=a[0];a[_]=88,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=t,n[_+4]=e,n[_+5]=r,n[_+6]=o,_+=7,a[0]=_,_>s&&i()},vertexAttrib3fv:function(t,e){var r=a[0];a[r]=89,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e.length,r+=5,n.set(e,r),r+=e.length,a[0]=r,r>s&&i()},vertexAttrib4f:function(t,e,r,o,_){var p=a[0];a[p]=90,a[p+1]=this._ptr_low,a[p+2]=this._ptr_high,a[p+3]=t,n[p+4]=e,n[p+5]=r,n[p+6]=o,n[p+7]=_,p+=8,a[0]=p,p>s&&i()},vertexAttrib4fv:function(t,e){var r=a[0];a[r]=91,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e.length,r+=5,n.set(e,r),r+=e.length,a[0]=r,r>s&&i()},vertexAttribPointer:function(t,e,r,n,_,p){var c=a[0];a[c]=92,a[c+1]=this._ptr_low,a[c+2]=this._ptr_high,a[c+3]=t,o[c+4]=e,a[c+5]=r,a[c+6]=n,o[c+7]=_,o[c+8]=p,c+=9,a[0]=c,c>s&&i()},viewport:function(t,e,r,n){var _=a[0];a[_]=93,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,o[_+3]=t,o[_+4]=e,o[_+5]=r,o[_+6]=n,_+=7,a[0]=_,_>s&&i()},drawArraysInstancedANGLE:function(t,e,r,n){var _=a[0];a[_]=94,a[_+1]=this._ptr_low,a[_+2]=this._ptr_high,a[_+3]=t,o[_+4]=e,o[_+5]=r,o[_+6]=n,_+=7,a[0]=_,_>s&&i()},drawElementsInstancedANGLE:function(t,e,r,n,_){var p=a[0];a[p]=95,a[p+1]=this._ptr_low,a[p+2]=this._ptr_high,a[p+3]=t,o[p+4]=e,a[p+5]=r,o[p+6]=n,o[p+7]=_,p+=8,a[0]=p,p>s&&i()},vertexAttribDivisorANGLE:function(t,e){var r=a[0];a[r]=96,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=t,a[r+4]=e,r+=5,a[0]=r,r>s&&i()},deleteVertexArrayOES:function(t){var r=a[0];a[r]=97,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()},bindVertexArrayOES:function(t){var r=a[0];a[r]=98,a[r+1]=this._ptr_low,a[r+2]=this._ptr_high,a[r+3]=null==t?void 0:t._ptr_low,a[r+4]=null==t?void 0:t._ptr_high,e.objects.push(t),r+=5,a[0]=r,r>s&&i()}};return t._commandBuffer=_,_};function redirect(t,e){var r=commandBufferCreator(t);e.activeTexture=r.activeTexture,e.attachShader=r.attachShader,e.bindBuffer=r.bindBuffer,e.bindFramebuffer=r.bindFramebuffer,e.bindRenderbuffer=r.bindRenderbuffer,e.bindTexture=r.bindTexture,e.blendColor=r.blendColor,e.blendEquation=r.blendEquation,e.blendEquationSeparate=r.blendEquationSeparate,e.blendFunc=r.blendFunc,e.blendFuncSeparate=r.blendFuncSeparate,e.bufferData=r.bufferData,e.bufferSubData=r.bufferSubData,e.clear=r.clear,e.clearColor=r.clearColor,e.clearDepth=r.clearDepth,e.clearStencil=r.clearStencil,e.colorMask=r.colorMask,e.compileShader=r.compileShader,e.copyTexImage2D=r.copyTexImage2D,e.copyTexSubImage2D=r.copyTexSubImage2D,e.cullFace=r.cullFace,e.deleteBuffer=r.deleteBuffer,e.deleteFramebuffer=r.deleteFramebuffer,e.deleteProgram=r.deleteProgram,e.deleteRenderbuffer=r.deleteRenderbuffer,e.deleteShader=r.deleteShader,e.deleteTexture=r.deleteTexture,e.depthFunc=r.depthFunc,e.depthMask=r.depthMask,e.depthRange=r.depthRange,e.detachShader=r.detachShader,e.disable=r.disable,e.disableVertexAttribArray=r.disableVertexAttribArray,e.drawArrays=r.drawArrays,e.drawElements=r.drawElements,e.enable=r.enable,e.enableVertexAttribArray=r.enableVertexAttribArray,e.flush=r.flush,e.framebufferRenderbuffer=r.framebufferRenderbuffer,e.framebufferTexture2D=r.framebufferTexture2D,e.frontFace=r.frontFace,e.generateMipmap=r.generateMipmap,e.hint=r.hint,e.lineWidth=r.lineWidth,e.linkProgram=r.linkProgram,e.pixelStorei=r.pixelStorei,e.polygonOffset=r.polygonOffset,e.renderbufferStorage=r.renderbufferStorage,e.sampleCoverage=r.sampleCoverage,e.scissor=r.scissor,e.stencilFunc=r.stencilFunc,e.stencilFuncSeparate=r.stencilFuncSeparate,e.stencilMask=r.stencilMask,e.stencilMaskSeparate=r.stencilMaskSeparate,e.stencilOp=r.stencilOp,e.stencilOpSeparate=r.stencilOpSeparate,e.texParameterf=r.texParameterf,e.texParameteri=r.texParameteri,e.uniform1f=r.uniform1f,e.uniform1fv=r.uniform1fv,e.uniform1i=r.uniform1i,e.uniform1iv=r.uniform1iv,e.uniform2f=r.uniform2f,e.uniform2fv=r.uniform2fv,e.uniform2i=r.uniform2i,e.uniform2iv=r.uniform2iv,e.uniform3f=r.uniform3f,e.uniform3fv=r.uniform3fv,e.uniform3i=r.uniform3i,e.uniform3iv=r.uniform3iv,e.uniform4f=r.uniform4f,e.uniform4fv=r.uniform4fv,e.uniform4i=r.uniform4i,e.uniform4iv=r.uniform4iv,e.uniformMatrix2fv=r.uniformMatrix2fv,e.uniformMatrix3fv=r.uniformMatrix3fv,e.uniformMatrix4fv=r.uniformMatrix4fv,e.useProgram=r.useProgram,e.validateProgram=r.validateProgram,e.vertexAttrib1f=r.vertexAttrib1f,e.vertexAttrib1fv=r.vertexAttrib1fv,e.vertexAttrib2f=r.vertexAttrib2f,e.vertexAttrib2fv=r.vertexAttrib2fv,e.vertexAttrib3f=r.vertexAttrib3f,e.vertexAttrib3fv=r.vertexAttrib3fv,e.vertexAttrib4f=r.vertexAttrib4f,e.vertexAttrib4fv=r.vertexAttrib4fv,e.vertexAttribPointer=r.vertexAttribPointer,e.viewport=r.viewport,e.drawArraysInstancedANGLE=r.drawArraysInstancedANGLE,e.drawElementsInstancedANGLE=r.drawElementsInstancedANGLE,e.vertexAttribDivisorANGLE=r.vertexAttribDivisorANGLE,e.deleteVertexArrayOES=r.deleteVertexArrayOES,e.bindVertexArrayOES=r.bindVertexArrayOES,e.__proto__.DEPTH_BUFFER_BIT=256,e.__proto__.STENCIL_BUFFER_BIT=1024,e.__proto__.COLOR_BUFFER_BIT=16384,e.__proto__.POINTS=0,e.__proto__.LINES=1,e.__proto__.LINE_LOOP=2,e.__proto__.LINE_STRIP=3,e.__proto__.TRIANGLES=4,e.__proto__.TRIANGLE_STRIP=5,e.__proto__.TRIANGLE_FAN=6,e.__proto__.ZERO=0,e.__proto__.ONE=1,e.__proto__.SRC_COLOR=768,e.__proto__.ONE_MINUS_SRC_COLOR=769,e.__proto__.SRC_ALPHA=770,e.__proto__.ONE_MINUS_SRC_ALPHA=771,e.__proto__.DST_ALPHA=772,e.__proto__.ONE_MINUS_DST_ALPHA=773,e.__proto__.DST_COLOR=774,e.__proto__.ONE_MINUS_DST_COLOR=775,e.__proto__.SRC_ALPHA_SATURATE=776,e.__proto__.FUNC_ADD=32774,e.__proto__.BLEND_EQUATION=32777,e.__proto__.BLEND_EQUATION_RGB=32777,e.__proto__.BLEND_EQUATION_ALPHA=34877,e.__proto__.FUNC_SUBTRACT=32778,e.__proto__.FUNC_REVERSE_SUBTRACT=32779,e.__proto__.BLEND_DST_RGB=32968,e.__proto__.BLEND_SRC_RGB=32969,e.__proto__.BLEND_DST_ALPHA=32970,e.__proto__.BLEND_SRC_ALPHA=32971,e.__proto__.CONSTANT_COLOR=32769,e.__proto__.ONE_MINUS_CONSTANT_COLOR=32770,e.__proto__.CONSTANT_ALPHA=32771,e.__proto__.ONE_MINUS_CONSTANT_ALPHA=32772,e.__proto__.BLEND_COLOR=32773,e.__proto__.ARRAY_BUFFER=34962,e.__proto__.ELEMENT_ARRAY_BUFFER=34963,e.__proto__.ARRAY_BUFFER_BINDING=34964,e.__proto__.ELEMENT_ARRAY_BUFFER_BINDING=34965,e.__proto__.STREAM_DRAW=35040,e.__proto__.STATIC_DRAW=35044,e.__proto__.DYNAMIC_DRAW=35048,e.__proto__.BUFFER_SIZE=34660,e.__proto__.BUFFER_USAGE=34661,e.__proto__.CURRENT_VERTEX_ATTRIB=34342,e.__proto__.FRONT=1028,e.__proto__.BACK=1029,e.__proto__.FRONT_AND_BACK=1032,e.__proto__.TEXTURE_2D=3553,e.__proto__.CULL_FACE=2884,e.__proto__.BLEND=3042,e.__proto__.DITHER=3024,e.__proto__.STENCIL_TEST=2960,e.__proto__.DEPTH_TEST=2929,e.__proto__.SCISSOR_TEST=3089,e.__proto__.POLYGON_OFFSET_FILL=32823,e.__proto__.SAMPLE_ALPHA_TO_COVERAGE=32926,e.__proto__.SAMPLE_COVERAGE=32928,e.__proto__.NO_ERROR=0,e.__proto__.INVALID_ENUM=1280,e.__proto__.INVALID_VALUE=1281,e.__proto__.INVALID_OPERATION=1282,e.__proto__.OUT_OF_MEMORY=1285,e.__proto__.CW=2304,e.__proto__.CCW=2305,e.__proto__.LINE_WIDTH=2849,e.__proto__.ALIASED_POINT_SIZE_RANGE=33901,e.__proto__.ALIASED_LINE_WIDTH_RANGE=33902,e.__proto__.CULL_FACE_MODE=2885,e.__proto__.FRONT_FACE=2886,e.__proto__.DEPTH_RANGE=2928,e.__proto__.DEPTH_WRITEMASK=2930,e.__proto__.DEPTH_CLEAR_VALUE=2931,e.__proto__.DEPTH_FUNC=2932,e.__proto__.STENCIL_CLEAR_VALUE=2961,e.__proto__.STENCIL_FUNC=2962,e.__proto__.STENCIL_FAIL=2964,e.__proto__.STENCIL_PASS_DEPTH_FAIL=2965,e.__proto__.STENCIL_PASS_DEPTH_PASS=2966,e.__proto__.STENCIL_REF=2967,e.__proto__.STENCIL_VALUE_MASK=2963,e.__proto__.STENCIL_WRITEMASK=2968,e.__proto__.STENCIL_BACK_FUNC=34816,e.__proto__.STENCIL_BACK_FAIL=34817,e.__proto__.STENCIL_BACK_PASS_DEPTH_FAIL=34818,e.__proto__.STENCIL_BACK_PASS_DEPTH_PASS=34819,e.__proto__.STENCIL_BACK_REF=36003,e.__proto__.STENCIL_BACK_VALUE_MASK=36004,e.__proto__.STENCIL_BACK_WRITEMASK=36005,e.__proto__.VIEWPORT=2978,e.__proto__.SCISSOR_BOX=3088,e.__proto__.COLOR_CLEAR_VALUE=3106,e.__proto__.COLOR_WRITEMASK=3107,e.__proto__.UNPACK_ALIGNMENT=3317,e.__proto__.PACK_ALIGNMENT=3333,e.__proto__.MAX_TEXTURE_SIZE=3379,e.__proto__.MAX_VIEWPORT_DIMS=3386,e.__proto__.SUBPIXEL_BITS=3408,e.__proto__.RED_BITS=3410,e.__proto__.GREEN_BITS=3411,e.__proto__.BLUE_BITS=3412,e.__proto__.ALPHA_BITS=3413,e.__proto__.DEPTH_BITS=3414,e.__proto__.STENCIL_BITS=3415,e.__proto__.POLYGON_OFFSET_UNITS=10752,e.__proto__.POLYGON_OFFSET_FACTOR=32824,e.__proto__.TEXTURE_BINDING_2D=32873,e.__proto__.SAMPLE_BUFFERS=32936,e.__proto__.SAMPLES=32937,e.__proto__.SAMPLE_COVERAGE_VALUE=32938,e.__proto__.SAMPLE_COVERAGE_INVERT=32939,e.__proto__.COMPRESSED_TEXTURE_FORMATS=34467,e.__proto__.COMPRESSED_RGB8_ETC2=37492,e.__proto__.COMPRESSED_RGBA8_ETC2_EAC=37496,e.__proto__.COMPRESSED_RGBA_ASTC_4x4_KHR=37808,e.__proto__.COMPRESSED_RGBA_ASTC_5x4_KHR=37809,e.__proto__.COMPRESSED_RGBA_ASTC_5x5_KHR=37810,e.__proto__.COMPRESSED_RGBA_ASTC_6x5_KHR=37811,e.__proto__.COMPRESSED_RGBA_ASTC_6x6_KHR=37812,e.__proto__.COMPRESSED_RGBA_ASTC_8x5_KHR=37813,e.__proto__.COMPRESSED_RGBA_ASTC_8x6_KHR=37814,e.__proto__.COMPRESSED_RGBA_ASTC_8x8_KHR=37815,e.__proto__.COMPRESSED_RGBA_ASTC_10x5_KHR=37816,e.__proto__.COMPRESSED_RGBA_ASTC_10x6_KHR=37817,e.__proto__.COMPRESSED_RGBA_ASTC_10x8_KHR=37818,e.__proto__.COMPRESSED_RGBA_ASTC_10x10_KHR=37819,e.__proto__.COMPRESSED_RGBA_ASTC_12x10_KHR=37820,e.__proto__.COMPRESSED_RGBA_ASTC_12x12_KHR=37821,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852,e.__proto__.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853,e.__proto__.COMPRESSED_RGB_ETC1_WEBGL=36196,e.__proto__.COMPRESSED_RGB_ATC_WEBGL=35986,e.__proto__.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987,e.__proto__.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798,e.__proto__.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840,e.__proto__.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842,e.__proto__.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841,e.__proto__.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843,e.__proto__.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,e.__proto__.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,e.__proto__.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,e.__proto__.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,e.__proto__.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916,e.__proto__.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917,e.__proto__.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918,e.__proto__.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919,e.__proto__.COMPRESSED_RED_RGTC1_EXT=36283,e.__proto__.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284,e.__proto__.COMPRESSED_RED_GREEN_RGTC2_EXT=36285,e.__proto__.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286,e.__proto__.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492,e.__proto__.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493,e.__proto__.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494,e.__proto__.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495,e.__proto__.DONT_CARE=4352,e.__proto__.FASTEST=4353,e.__proto__.NICEST=4354,e.__proto__.GENERATE_MIPMAP_HINT=33170,e.__proto__.BYTE=5120,e.__proto__.UNSIGNED_BYTE=5121,e.__proto__.SHORT=5122,e.__proto__.UNSIGNED_SHORT=5123,e.__proto__.INT=5124,e.__proto__.UNSIGNED_INT=5125,e.__proto__.FLOAT=5126,e.__proto__.DEPTH_COMPONENT=6402,e.__proto__.ALPHA=6406,e.__proto__.RGB=6407,e.__proto__.RGBA=6408,e.__proto__.LUMINANCE=6409,e.__proto__.LUMINANCE_ALPHA=6410,e.__proto__.UNSIGNED_SHORT_4_4_4_4=32819,e.__proto__.UNSIGNED_SHORT_5_5_5_1=32820,e.__proto__.UNSIGNED_SHORT_5_6_5=33635,e.__proto__.FRAGMENT_SHADER=35632,e.__proto__.VERTEX_SHADER=35633,e.__proto__.MAX_VERTEX_ATTRIBS=34921,e.__proto__.MAX_VERTEX_UNIFORM_VECTORS=36347,e.__proto__.MAX_VARYING_VECTORS=36348,e.__proto__.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,e.__proto__.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,e.__proto__.MAX_TEXTURE_IMAGE_UNITS=34930,e.__proto__.MAX_FRAGMENT_UNIFORM_VECTORS=36349,e.__proto__.SHADER_TYPE=35663,e.__proto__.DELETE_STATUS=35712,e.__proto__.LINK_STATUS=35714,e.__proto__.VALIDATE_STATUS=35715,e.__proto__.ATTACHED_SHADERS=35717,e.__proto__.ACTIVE_UNIFORMS=35718,e.__proto__.ACTIVE_ATTRIBUTES=35721,e.__proto__.SHADING_LANGUAGE_VERSION=35724,e.__proto__.CURRENT_PROGRAM=35725,e.__proto__.NEVER=512,e.__proto__.LESS=513,e.__proto__.EQUAL=514,e.__proto__.LEQUAL=515,e.__proto__.GREATER=516,e.__proto__.NOTEQUAL=517,e.__proto__.GEQUAL=518,e.__proto__.ALWAYS=519,e.__proto__.KEEP=7680,e.__proto__.REPLACE=7681,e.__proto__.INCR=7682,e.__proto__.DECR=7683,e.__proto__.INVERT=5386,e.__proto__.INCR_WRAP=34055,e.__proto__.DECR_WRAP=34056,e.__proto__.VENDOR=7936,e.__proto__.RENDERER=7937,e.__proto__.VERSION=7938,e.__proto__.NEAREST=9728,e.__proto__.LINEAR=9729,e.__proto__.NEAREST_MIPMAP_NEAREST=9984,e.__proto__.LINEAR_MIPMAP_NEAREST=9985,e.__proto__.NEAREST_MIPMAP_LINEAR=9986,e.__proto__.LINEAR_MIPMAP_LINEAR=9987,e.__proto__.TEXTURE_MAG_FILTER=10240,e.__proto__.TEXTURE_MIN_FILTER=10241,e.__proto__.TEXTURE_WRAP_S=10242,e.__proto__.TEXTURE_WRAP_T=10243,e.__proto__.TEXTURE=5890,e.__proto__.TEXTURE_CUBE_MAP=34067,e.__proto__.TEXTURE_BINDING_CUBE_MAP=34068,e.__proto__.TEXTURE_CUBE_MAP_POSITIVE_X=34069,e.__proto__.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,e.__proto__.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,e.__proto__.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,e.__proto__.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,e.__proto__.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,e.__proto__.MAX_CUBE_MAP_TEXTURE_SIZE=34076,e.__proto__.TEXTURE0=33984,e.__proto__.TEXTURE1=33985,e.__proto__.TEXTURE2=33986,e.__proto__.TEXTURE3=33987,e.__proto__.TEXTURE4=33988,e.__proto__.TEXTURE5=33989,e.__proto__.TEXTURE6=33990,e.__proto__.TEXTURE7=33991,e.__proto__.TEXTURE8=33992,e.__proto__.TEXTURE9=33993,e.__proto__.TEXTURE10=33994,e.__proto__.TEXTURE11=33995,e.__proto__.TEXTURE12=33996,e.__proto__.TEXTURE13=33997,e.__proto__.TEXTURE14=33998,e.__proto__.TEXTURE15=33999,e.__proto__.TEXTURE16=34e3,e.__proto__.TEXTURE17=34001,e.__proto__.TEXTURE18=34002,e.__proto__.TEXTURE19=34003,e.__proto__.TEXTURE20=34004,e.__proto__.TEXTURE21=34005,e.__proto__.TEXTURE22=34006,e.__proto__.TEXTURE23=34007,e.__proto__.TEXTURE24=34008,e.__proto__.TEXTURE25=34009,e.__proto__.TEXTURE26=34010,e.__proto__.TEXTURE27=34011,e.__proto__.TEXTURE28=34012,e.__proto__.TEXTURE29=34013,e.__proto__.TEXTURE30=34014,e.__proto__.TEXTURE31=34015,e.__proto__.ACTIVE_TEXTURE=34016,e.__proto__.REPEAT=10497,e.__proto__.CLAMP_TO_EDGE=33071,e.__proto__.MIRRORED_REPEAT=33648,e.__proto__.FLOAT_VEC2=35664,e.__proto__.FLOAT_VEC3=35665,e.__proto__.FLOAT_VEC4=35666,e.__proto__.INT_VEC2=35667,e.__proto__.INT_VEC3=35668,e.__proto__.INT_VEC4=35669,e.__proto__.BOOL=35670,e.__proto__.BOOL_VEC2=35671,e.__proto__.BOOL_VEC3=35672,e.__proto__.BOOL_VEC4=35673,e.__proto__.FLOAT_MAT2=35674,e.__proto__.FLOAT_MAT3=35675,e.__proto__.FLOAT_MAT4=35676,e.__proto__.SAMPLER_2D=35678,e.__proto__.SAMPLER_CUBE=35680,e.__proto__.VERTEX_ATTRIB_ARRAY_ENABLED=34338,e.__proto__.VERTEX_ATTRIB_ARRAY_SIZE=34339,e.__proto__.VERTEX_ATTRIB_ARRAY_STRIDE=34340,e.__proto__.VERTEX_ATTRIB_ARRAY_TYPE=34341,e.__proto__.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,e.__proto__.VERTEX_ATTRIB_ARRAY_POINTER=34373,e.__proto__.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,e.__proto__.IMPLEMENTATION_COLOR_READ_TYPE=35738,e.__proto__.IMPLEMENTATION_COLOR_READ_FORMAT=35739,e.__proto__.COMPILE_STATUS=35713,e.__proto__.LOW_FLOAT=36336,e.__proto__.MEDIUM_FLOAT=36337,e.__proto__.HIGH_FLOAT=36338,e.__proto__.LOW_INT=36339,e.__proto__.MEDIUM_INT=36340,e.__proto__.HIGH_INT=36341,e.__proto__.FRAMEBUFFER=36160,e.__proto__.RENDERBUFFER=36161,e.__proto__.RGBA4=32854,e.__proto__.RGB5_A1=32855,e.__proto__.RGB565=36194,e.__proto__.DEPTH_COMPONENT16=33189,e.__proto__.STENCIL_INDEX8=36168,e.__proto__.DEPTH_STENCIL=34041,e.__proto__.RENDERBUFFER_WIDTH=36162,e.__proto__.RENDERBUFFER_HEIGHT=36163,e.__proto__.RENDERBUFFER_INTERNAL_FORMAT=36164,e.__proto__.RENDERBUFFER_RED_SIZE=36176,e.__proto__.RENDERBUFFER_GREEN_SIZE=36177,e.__proto__.RENDERBUFFER_BLUE_SIZE=36178,e.__proto__.RENDERBUFFER_ALPHA_SIZE=36179,e.__proto__.RENDERBUFFER_DEPTH_SIZE=36180,e.__proto__.RENDERBUFFER_STENCIL_SIZE=36181,e.__proto__.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,e.__proto__.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,e.__proto__.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,e.__proto__.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,e.__proto__.COLOR_ATTACHMENT0=36064,e.__proto__.DEPTH_ATTACHMENT=36096,e.__proto__.STENCIL_ATTACHMENT=36128,e.__proto__.DEPTH_STENCIL_ATTACHMENT=33306,e.__proto__.NONE=0,e.__proto__.FRAMEBUFFER_COMPLETE=36053,e.__proto__.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,e.__proto__.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,e.__proto__.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,e.__proto__.FRAMEBUFFER_UNSUPPORTED=36061,e.__proto__.FRAMEBUFFER_BINDING=36006,e.__proto__.RENDERBUFFER_BINDING=36007,e.__proto__.MAX_RENDERBUFFER_SIZE=34024,e.__proto__.INVALID_FRAMEBUFFER_OPERATION=1286,e.__proto__.UNPACK_FLIP_Y_WEBGL=37440,e.__proto__.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,e.__proto__.CONTEXT_LOST_WEBGL=37442,e.__proto__.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,e.__proto__.BROWSER_DEFAULT_WEBGL=37444,e.__proto__.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070,e.__proto__.MIN_EXT=32775,e.__proto__.MAX_EXT=32776,e.__proto__.TEXTURE_MAX_ANISOTROPY_EXT=34046,e.__proto__.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047,e.__proto__.VERTEX_ARRAY_BINDING_OES=34229}var KryptonCanvasImpl=function(){function t(t,e){var r=t.lynx;this.krypton=r.krypton,this.krypton&&(this.krypton.createdCanvas={},this.CanvasElement=this.krypton.CanvasElement,this.ImageElement=this.krypton.ImageElement,this.VideoElement=this.krypton.VideoElement,this._adoptCanvas(this.CanvasElement,this.krypton),eventWrapper(this.CanvasElement),eventWrapper(this.ImageElement),eventWrapper(this.VideoElement))}return t.prototype._adoptCanvas=function(t,e){if(t){var r=t.prototype.getContext;t.prototype.getContext=function(t,n){if("webgl"===t||"webgl2"===t){var o=void 0;return(o=n?r.call(this,"webgl",n):r.call(this,"webgl"))?(redirect(e,o),o):null}return n?r.call(this,t,n):r.call(this,t)}}},t.prototype._createKryptonCanvas=function(t,e){if(this.CanvasElement&&t){if(e){var r=new this.CanvasElement(t,e);return r.style={},r}return this._createHeliumLikeCanvas(t)}},t.prototype._createKryptonCanvasWithInitialSize=function(t,e,r,n){return n?this._doCreateCanvas(t,e,r,n):this._createHeliumLikeCanvas(t,e,r)},t.prototype._doCreateCanvas=function(t,e,r,n){if(this.CanvasElement){if(t){var o=new this.CanvasElement(t,n);return o.style={},e>0&&r>0&&(o.width=e,o.height=r,o.style={width:e,height:r}),o}return this.createOffscreenCanvas(e,r)}},t.prototype._createHeliumLikeCanvas=function(t,e,r){if(!this.CanvasElement)return nativeConsole.error("canvas ng has not setup!!!"),null;var n=new this.CanvasElement(t,!0);if(n.isSurfaceCreated){var o=_global.SystemInfo.pixelRatio;n.width=Math.ceil(n.touch_width*o),n.height=Math.ceil(n.touch_height*o)}else if(n.viewWidth>0&&n.viewHeight>0){o=_global.SystemInfo.pixelRatio;n.width=Math.ceil(n.viewWidth*o),n.height=Math.ceil(n.viewHeight*o)}else nativeConsole.error("canvas ng canvas surface has not created!!!"),n=null;return n&&(n.style={width:n.width,height:n.height},e>0&&r>0&&(n.width=e,n.height=r,n.style={ratioOrWidth:e,height:r})),n},t.prototype._getCachedCanvas=function(t){if(t)return this.krypton&&this.krypton.createdCanvas?this.krypton.createdCanvas[t]:void 0},t.prototype.helium=function(){return this.krypton},t.prototype.aurum=function(){return this.krypton&&this.krypton._getAurum()},t.prototype.createAudio=function(t){var e=this.krypton&&this.krypton._getAurum();if(e){var r=new(0,e.Audio);return r.setLynxSrc=function(t){this.src=t},t&&(r.src=t),r}throw new Error("canvas ng getAurum return null!!")},t.prototype.createCanvas=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!t)return null;if(nativeConsole.log("create canvas-ng element"),this._getCachedCanvas(t)){var o=this._getCachedCanvas(t),a=o.width;return o.width=1,o.width=a,o}if(0==r.length)e=this._createHeliumLikeCanvas(t);else if(1==r.length)if("[object Boolean]"==Object.prototype.toString.call(r[0]))e=this._createKryptonCanvas(t,r[0]);else{if("[object Number]"!=Object.prototype.toString.call(r[0]))throw new Error("canvas ng create canvas illegal arguments!!!!");nativeConsole.error("Specify ratio in canvas ng element is not supported!!!!"),e=this._createHeliumLikeCanvas(t)}else if(2==r.length)e=this._createHeliumLikeCanvas(t,r[0],r[1]);else{if(3!=r.length)throw new Error("canvas ng create canvas illegal arguments!!!!");e=this._createKryptonCanvasWithInitialSize(t,r[0],r[1],r[2])}return this.krypton.createdCanvas[t]=e,e},t.prototype.createLegacyKryptonCanvas=function(t,e,r){if(this._getCachedCanvas(t)){var n=this._getCachedCanvas(t);return e>0&&r>0&&(n.width=e,n.height=r,n.style={width:e,height:r}),n}var o=this._doCreateCanvas(t,e,r,!0);return this.krypton.createdCanvas[t]=o,o},t.prototype.createCanvasAsync=function(t,e,r,n,o){throw new Error("canvas ng lynx.createCanvasAsync is not implemented!!")},t.prototype.createImage=function(t){if(this.ImageElement){var e=new this.ImageElement;return e.setLynxSrc=function(t){this.src=t},t&&(e.src=t),e}},t.prototype.createOffscreenCanvas=function(t,e){if(this.CanvasElement){var r=new this.CanvasElement;return r.style={},t>0&&e>0&&(r.width=t,r.height=e),r}},t.prototype.createVideo=function(t,e){var r=new this.VideoElement;return r.setLynxSrc=function(t){this.src=t},t&&(r.src=t),r},t.prototype.disposeAllCanvases=function(){this.krypton&&(this.krypton.createdCanvas={}),nativeConsole.error("canvas ng lynx.disposeAllCanvases is not implemented!!")},t.prototype.getAmaz=function(){var t=this.krypton.amazing;return t||(this.krypton.amazing=t=this.krypton._getAmaz(),t)},t.prototype.getAudioContext=function(){if(!this.krypton._audioContext){var t=this.krypton._getAurum().AudioContext;this.krypton._audioContext=new t}return this.krypton._audioContext},t.prototype.getCanvasCreatedByName=function(t){nativeConsole.error("canvas ng lynx.getCanvasCreatedByName is not implemented!!")},t.prototype.getEffect=function(){nativeConsole.error("Krypton lynx.getEffect is not implemented!!")},t.prototype.getHardWareManager=function(){var t=this.krypton,e=function(){function e(){}return e.prototype._gyroscope=function(){return this._gyroscopeData||(this._gyroscopeData=new t.Gyroscope)},e.prototype.startGyroscope=function(t){return this._gyroscope().start(t)},e.prototype.stopGyroscope=function(){return this._gyroscope().stop()},e.prototype.getGyroscopeData=function(){var t=this._gyroscope();return{x:t.x,y:t.y,z:t.z,roll:t.roll,pitch:t.pitch,yaw:t.yaw}},e}();return this.krypton._hardware||(this.krypton._hardware=new e)},t.prototype.getUserMedia=function(t,e,r){t?t.audio&&!t.video?e((0,this.krypton._getAurum().setupCapture)()):this.krypton._getUserMedia(t,e):r(null,"options = null")},t.prototype.napi=function(){throw new Error("canvas ng lynx.getEffect is not implemented!!")},t.prototype.pauseMicrophone=function(){throw new Error("canvas ng lynx.pauseMicrophone is not implemented!!")},t.prototype.readFile=function(t,e,r){var n=r&&(null==r?void 0:r.encoding)?1:2;this.krypton._loadAsync(t,n,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.apply(void 0,__spreadArray([],__read(t)))}))},t.prototype.readFileSync=function(t,e){throw new Error("canvas ng lynx.readFileSync is not implemented!!")},t.prototype.requestCamera=function(t,e,r,n){throw new Error("canvas ng lynx.requestCamera is not implemented!!")},t.prototype.requestMicrophone=function(){throw new Error("canvas ng lynx.requestCamera is not implemented!!")},t.prototype.resumeMicrophone=function(){throw new Error("canvas ng lynx.resumeMicrophone is not implemented!!")},t}();function disposeHeliumEventTarget(t,e){if(void 0===e&&(e=!1),t)try{var r=t;r.addEventListener&&(r.addEventListener=function(){}),r._lynxEventTypes&&r.removeAllListeners&&(r._lynxEventTypes.forEach((function(t){r.removeAllListeners(t)})),r._lynxEventTypes=null)}catch(t){e&&nativeConsole.error(t)}}function disposeHeliumCanvas(t,e,r){if(void 0===r&&(r=!0),t){disposeHeliumEventTarget(t);try{var n=t;n.disableUpdate&&n.disableUpdate();var o=n.drawable;o&&e&&(e.canvases&&e.canvases[o]===n&&delete e.canvases[o],e.touchables&&e.touchables[o]===n&&delete e.touchables[o]),n.dispose&&(n.dispose(),n.dispose=null),n.getContext=null}catch(t){r&&nativeConsole.error(t)}}}function disposeHeliumMedia(t,e){if(void 0===e&&(e=!1),t){disposeHeliumEventTarget(t);try{var r=t;r&&(r.dispose?r.dispose():r.stop&&r.stop(),r.src=null,r.srcObject&&(r.srcObject=null),r.setLynxSrc&&(r.setLynxSrc=null))}catch(t){e&&nativeConsole.error(t)}}}function replaceHeliumEventTargetListenerFunction(t){if(t&&t.addEventListener){var e=t,r=e.addEventListener.bind(e);e.addEventListener=function(t,e){r(t,e),this._lynxEventTypes||(this._lynxEventTypes=new Set),this._lynxEventTypes.add(t)}}}function replaceHeliumCanvasGetContextFunction(t){if(t&&t.getContext){var e=t,r=e.getContext.bind(e);e.getContext=function(t,n){var o=r(t,n);if("webgl"!==t||!o||o._lynxAllocatedWebglData)return o;if(o._lynxAllocatedWebglData={textures:new Set,frameBuffers:new Set,renderBuffers:new Set,programs:new Set,shaders:new Set,buffers:new Set},e.dispose){var a=e.dispose.bind(e);e.dispose=function(){try{var t=o._lynxAllocatedWebglData;t.textures.forEach((function(t){o.deleteTexture(t)})),t.textures.clear(),t.frameBuffers.forEach((function(t){o.deleteFramebuffer(t)})),t.frameBuffers.clear(),t.renderBuffers.forEach((function(t){o.deleteRenderbuffer(t)})),t.renderBuffers.clear(),t.programs.forEach((function(t){o.deleteProgram(t)})),t.programs.clear(),t.shaders.forEach((function(t){o.deleteShader(t)})),t.shaders.clear(),t.buffers.forEach((function(t){o.deleteBuffer(t)})),t.buffers.clear()}catch(t){}a()}}var i=o.createTexture.bind(o);o.createTexture=function(){var t=i();return t&&o._lynxAllocatedWebglData.textures.add(t),t};var s=o.deleteTexture.bind(o);o.deleteTexture=function(t){return t&&o._lynxAllocatedWebglData.textures.delete(t),s(t)};var _=o.createFramebuffer.bind(o);o.createFramebuffer=function(){var t=_();return t&&o._lynxAllocatedWebglData.frameBuffers.add(t),t};var p=o.deleteFramebuffer.bind(o);o.deleteFramebuffer=function(t){return t&&o._lynxAllocatedWebglData.frameBuffers.delete(t),p(t)};var c=o.createRenderbuffer.bind(o);o.createRenderbuffer=function(){var t=c();return t&&o._lynxAllocatedWebglData.renderBuffers.add(t),t};var u=o.deleteRenderbuffer.bind(o);o.deleteRenderbuffer=function(t){return t&&o._lynxAllocatedWebglData.renderBuffers.delete(t),u(t)};var l=o.createProgram.bind(o);o.createProgram=function(){var t=l();return t&&o._lynxAllocatedWebglData.programs.add(t),t};var h=o.deleteProgram.bind(o);o.deleteProgram=function(t){return t&&o._lynxAllocatedWebglData.programs.delete(t),h(t)};var f=o.createShader.bind(o);o.createShader=function(t){var e=f(t);return e&&o._lynxAllocatedWebglData.shaders.add(e),e};var d=o.deleteShader.bind(o);o.deleteShader=function(t){return t&&o._lynxAllocatedWebglData.shaders.delete(t),d(t)};var v=o.createBuffer.bind(o);o.createBuffer=function(){var t=v();return t&&o._lynxAllocatedWebglData.buffers.add(t),t};var y=o.deleteBuffer.bind(o);return o.deleteBuffer=function(t){return t&&o._lynxAllocatedWebglData.buffers.delete(t),y(t)},o}}}function flushOnScreenCanvases(t,e){void 0===e&&(e=!1);var r=t;try{if(r._heliumData&&r._heliumData.onCanvases){var n=r._heliumData.onCanvases;for(var o in n){var a=n[o];if(a&&a.canvas)a.canvas.forceUpdate.bind(a.canvas)()}}}catch(t){e&&nativeConsole.error(t)}}function clearHeliumCanvas(t,e){void 0===e&&(e=!1);var r=t;if(r._heliumData)try{if(r._heliumData.medias&&r._heliumData.medias.forEach((function(t){disposeHeliumMedia(t)})),r._heliumData.onCanvases){var n=r._heliumData.onCanvases;for(var o in n){var a=n[o];a&&disposeHeliumCanvas(a.canvas,r._heliumData.scandium)}}if(r._heliumData.offCanvases&&r._heliumData.offCanvases.forEach((function(t){disposeHeliumCanvas(t,r._heliumData.scandium)})),r._heliumData.audioCtx)try{r._heliumData.audioCtx._unref()}catch(t){e&&nativeConsole.error(t)}if(r._heliumData.hardware)try{r._heliumData.hardware.dispose()}catch(t){e&&nativeConsole.error(t)}}catch(t){e&&nativeConsole.error(t)}r._heliumData=null}function readFileResultParamToFormat(t,e){if(e instanceof Object){if("font"===e.format)return t.LOAD_FONT;if(e.encoding||"text"===e.format)return t.LOAD_TEXT}else if(e){if("font"===e)return t.LOAD_FONT;if("text"===e)return t.LOAD_TEXT}return t.LOAD_ARRAYBUFFER}var HeliumCanvasImpl=function(){function t(t,e){this.proxy=t,this.PromiseConstructor=e,this.proxy._heliumData||(this.proxy._heliumData={helium:null,scandium:null,aurum:null,medias:[],onCanvases:{},canvasIndex:0,offCanvases:new Set,audioCtx:null,hardware:null,effect:null,napi:null,amazing:null,hasFlushCallback:!1})}return t.prototype._helium=function(){return this.proxy._heliumData.helium||(this.proxy._heliumData.helium=this.proxy._nativeApp.heliumProxy())},t.prototype._heliumScandium=function(){return this.proxy._heliumData.scandium||(this.proxy._heliumData.scandium=this._helium().require("scandium"))},t.prototype._pathSuffix=function(){return"?_lynxId="+(this.proxy._params?this.proxy._params.appGUID:"")},t.prototype._postSetCanvasSize=function(t,e,r,n){if(e>=2)r>0&&n>0&&(t.width=r,t.height=n);else{var o=1;(o=1==e?r:this._heliumScandium().ratio)>0&&1!==o&&(t.width*=o,t.height*=o)}},t.prototype._tryToSetFlushCallback=function(){var t=this;this.proxy._heliumData.hasFlushCallback||(this.proxy._heliumData.hasFlushCallback=!0,this.proxy._nativeApp.heliumSetFlushCallback((function(){flushOnScreenCanvases(t.proxy)})))},t.prototype._heliumRequestMicrophone=function(t,e,r){t.media.request(t.media.AUDIO,(function(t){r&&(t&&t.success?r(e()):r(null,t&&t.errMsg?t.errMsg:"unknown"))})),null!=this.proxy._nativeApp&&this.proxy._nativeApp.onPiperInvoked("helium","heliumRequestMicrophone")},t.prototype._heliumRequestCamera=function(t,e,r){var n=t.media,o=n.VIDEO,a=e.facingMode;"object"==typeof a&&(o|=n.EXACT,a=a.exact),"environment"!==a&&"back"!==a||(o|=n.BACK),e.beautify&&(o|=n.BEAUTIFY),e.landscape&&(o|=n.LANDSCAPE_RIGHT),e.hand&&(o|=n.HAND),e.hairParser&&(o|=n.HAIRPARSE),e.matting&&(o|=n.MATTING),e.skeleton&&(o|=n.SKELETON),e.planeTrack&&(o|=n.PLANETRACK),e.sticker&&(o|=n.STICKER);var i=e.pageId||0;n.request(o,(function(t){r&&(t&&t.success?r(t):r(null,t&&t.errMsg?t.errMsg:"unknown"))}),i),null!=this.proxy._nativeApp&&this.proxy._nativeApp.onPiperInvoked("helium","heliumRequestCamera")},t.prototype.helium=function(){return this._helium()},t.prototype.aurum=function(){return this.proxy._heliumData.aurum||(this.proxy._heliumData.aurum=this.proxy._nativeApp.heliumProxy("Aurum"))},t.prototype.createAudio=function(t){var e=new(0,this.aurum().Audio);return e._url_suffix=this._pathSuffix(),e.setLynxSrc=function(t){this.src=t+this._url_suffix},this.proxy._heliumData.medias.push(e),t&&(e.src=t+e._url_suffix),e},t.prototype.createCanvas=function(t){for(var e,r,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!t)return null;nativeConsole.log("create helium canvas element"),n.length>=2?(e=n[0],r=n[1]):1==n.length&&(e=n[0]);var a=this._heliumScandium(),i=++this.proxy._heliumData.canvasIndex,s=this.proxy._heliumData.onCanvases[t];s&&disposeHeliumCanvas(s.canvas,a),s=this.proxy._heliumData.onCanvases[t]={index:i,canvas:null,name:t};var _=this.proxy._nativeApp.createCanvas(t);if(!_)return null;var p=a.touchables[_];return p?(s.canvas=p,replaceHeliumCanvasGetContextFunction(p),replaceHeliumEventTargetListenerFunction(p),this._postSetCanvasSize(p,arguments.length-1,e,r),this._tryToSetFlushCallback(),p):null},t.prototype.createCanvasAsync=function(t,e,r,n,o){var a=this;if(t&&e){var i=this._heliumScandium(),s=++this.proxy._heliumData.canvasIndex,_=this.proxy._heliumData.onCanvases[t];_&&disposeHeliumCanvas(_.canvas,i),_=this.proxy._heliumData.onCanvases[t]={index:s,canvas:null,name:t};var p=arguments.length-3;this.proxy._nativeApp.createCanvasAsync(t,(function(c){var u=i.touchables[c];u?_.index!==s?(disposeHeliumCanvas(u,i),r&&r("ignore old request")):(_.canvas=u,replaceHeliumCanvasGetContextFunction(u),replaceHeliumEventTargetListenerFunction(u),a._postSetCanvasSize(u,p,n,o),a._tryToSetFlushCallback(),e(u)):r&&r("no touchables found for "+t)}))}else r&&r("missing name or onSuccess param")},t.prototype.createImage=function(t){var e=new(this._helium().Image)(this._pathSuffix());return replaceHeliumEventTargetListenerFunction(e),e.setLynxSrc=function(t){this.src=t},t&&(e.src=t),this.proxy._heliumData.medias.push(e),e},t.prototype.createOffscreenCanvas=function(t,e){var r=new(this._helium().Canvas)(0,t>0?t:300,e>0?e:300);return r&&(replaceHeliumCanvasGetContextFunction(r),replaceHeliumEventTargetListenerFunction(r),this.proxy._heliumData.offCanvases.add(r)),r},t.prototype.createVideo=function(t,e){var r=new(this._helium().Video)(this._pathSuffix(),e);return replaceHeliumEventTargetListenerFunction(r),r.setLynxSrc=function(t){this.src=t},r._canUseLoadOptions=!0,this.proxy._heliumData.medias.push(r),t&&(r.src=t),r},t.prototype.disposeAllCanvases=function(){clearHeliumCanvas(this.proxy)},t.prototype.getAmaz=function(){var t=this.proxy._heliumData.amazing;if(t)return t;var e=this.proxy._nativeApp.heliumProxy("effect_module");return e?(this.proxy._heliumData.amazing=t=this.napi().load(e),t):null},t.prototype.getAudioContext=function(){var t=this.proxy._heliumData.audioCtx;if(!t){var e=this.aurum().AudioContext,r=(t=this.proxy._heliumData.audioCtx=new e)._ref;r&&r()}return t},t.prototype.getCanvasCreatedByName=function(t){if(t){var e=this.proxy._heliumData.onCanvases[t];if(e)return e.canvas}return null},t.prototype.getEffect=function(){var t=this.proxy._heliumData.effect;if(t||!this.proxy._nativeApp.validateEffect())return t;var e=this._helium();return t={createFaceInfoConvertor:e.createFaceInfoConvertor,createFaceDetector:e.createFaceDetector,createHandDetector:e.createHandDetector,createHandInfoConvertor:e.createHandInfoConvertor,createSkeletonDetector:e.createSkeletonDetector,createSlamInfoConvertor:e.createSlamInfoConvertor,createSlamDetector:e.createSlamDetector}},t.prototype.getUserMedia=function(t,e,r){var n=this;void 0===e&&(e=function(){}),void 0===r&&(r=function(){});var o=function(t,o){n.proxy._nativeApp&&t?e(t):r(o)};if(t&&t.video){var a=t.video instanceof Object?t.video:{};this._heliumRequestCamera(this._helium(),a,o)}else if(t&&t.audio){var i=this.aurum().setupCapture;this._heliumRequestMicrophone(this._helium(),i,o)}else r("error params")},t.prototype.pauseMicrophone=function(){var t=this.aurum().pauseCapture;t&&t()},t.prototype.requestCamera=function(t,e,r,n){var o=this;return new this.PromiseConstructor((function(r,a){var i=t instanceof Object?t:{};"environment"!==t&&"back"!==t||(i.facingMode=t),e&&(i.beautify=!0),n&&(i.hand=!0),o._heliumRequestCamera(o._helium(),i,(function(t,e){null==o.proxy._nativeApp?a(new Error("Native app is released. !!!Please do not call any native related functions. ")):t?r(t):a(new Error(e))}))}))},t.prototype.requestMicrophone=function(){var t=this;return new this.PromiseConstructor((function(e,r){var n=t.aurum().setupCapture;t._heliumRequestMicrophone(t._helium(),n,(function(n,o){null==t.proxy._nativeApp?r(new Error("Native app is released. !!!Please do not call any native related functions. ")):n?e(n):r(new Error(o))}))}))},t.prototype.resumeMicrophone=function(){var t=this.aurum().resumeCapture;t&&t()},t.prototype.getHardWareManager=function(){if(!this.proxy._heliumData.hardware){var t=this.proxy._nativeApp.heliumProxy("hardware").HardWareManager;this.proxy._heliumData.hardware=new t}return this.proxy._heliumData.hardware},t.prototype.napi=function(){return this.proxy._heliumData.napi||(this.proxy._heliumData.napi=this.proxy._nativeApp.heliumProxy("napi"))},t.prototype.readFile=function(t,e,r){var n=this,o=this._heliumScandium(),a=readFileResultParamToFormat(o,r);if(/data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,/.test(t)){var i=o.loadDataUrl(t.slice(t.indexOf(",")+1),a);return e?e(i):i}if(!e)return o.loadSync(t+this._pathSuffix(),a);o.loadAsync(t+this._pathSuffix(),a,(function(t){null!=n.proxy._nativeApp&&e&&e(t)}))},t.prototype.readFileSync=function(t,e){return this.readFile(t,null,e)},t}(),isNativeConsoleHasALog;function initCanvas(t,e,r){void 0===r&&(r=!1);var n,o=r?new KryptonCanvasImpl(t,e):new HeliumCanvasImpl(t,e),a=t.lynx;a.helium=function(){return o.helium()},a.aurum=function(){return o.aurum()},a.createAudio=function(t){return o.createAudio(t)},a.createCanvas=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return o.createCanvas.apply(o,__spreadArray([t],__read(e)))},a.createCanvasAsync=function(t,e,r,n,a){return o.createCanvasAsync(t,e,r,n)},a.createImage=function(t){return o.createImage(t)},a.createOffscreenCanvas=function(t,e){return o.createOffscreenCanvas(t,e)},a.createVideo=function(t,e){return o.createVideo(t,e)},a.disposeAllCanvases=function(){return o.disposeAllCanvases()},a.getAmaz=function(){return o.getAmaz()},a.getAudioContext=function(){return o.getAudioContext()},a.getCanvasCreatedByName=function(t){return o.getCanvasCreatedByName(t)},a.getEffect=function(){return o.getEffect()},a.getHardWareManager=function(){return o.getHardWareManager()},a.getUserMedia=function(t,e,r){return o.getUserMedia(t,e,r)},a.napi=function(){return o.napi()},a.pauseMicrophone=function(){return o.pauseMicrophone()},a.readFile=function(t,e,r){return o.readFile(t,e,r)},a.readFileSync=function(t,e){return o.readFileSync(t,e)},a.requestCamera=function(t,e,r,n){return o.requestCamera(t,e,r,n)},a.requestMicrophone=function(){return o.requestMicrophone()},a.resumeMicrophone=function(){return o.resumeMicrophone()},n=o instanceof KryptonCanvasImpl?o:new KryptonCanvasImpl(t,e),a.krypton&&(a.krypton.aurum=function(){return n.aurum()},a.krypton.createAudio=function(t){return n.createAudio(t)},a.krypton.createCanvas=function(t,e,r){return n.createLegacyKryptonCanvas(t,e,r)},a.krypton.createCanvasAsync=function(t,e,r,o,a){return n.createCanvasAsync(t,e,r,o)},a.krypton.createImage=function(t){return n.createImage(t)},a.krypton.createOffscreenCanvas=function(t,e){return n.createOffscreenCanvas(t,e)},a.krypton.createVideo=function(t,e){return n.createVideo(t,e)},a.krypton.disposeAllCanvases=function(){return n.disposeAllCanvases()},a.krypton.getAmaz=function(){return n.getAmaz()},a.krypton.getAudioContext=function(){return n.getAudioContext()},a.krypton.getCanvasCreatedByName=function(t){return n.getCanvasCreatedByName(t)},a.krypton.getEffect=function(){return n.getEffect()},a.krypton.getHardWareManager=function(){return n.getHardWareManager()},a.krypton.getUserMedia=function(t,e,r){return n.getUserMedia(t,e,r)},a.krypton.napi=function(){return n.napi()},a.krypton.pauseMicrophone=function(){return n.pauseMicrophone()},a.krypton.readFile=function(t,e,r){return n.readFile(t,e,r)},a.krypton.readFileSync=function(t,e){return n.readFileSync(t,e)},a.krypton.requestCamera=function(t,e,r,o){return n.requestCamera(t,e,r,o)},a.krypton.requestMicrophone=function(){return n.requestMicrophone()},a.krypton.resumeMicrophone=function(){return n.resumeMicrophone()})}function alog(t){void 0===isNativeConsoleHasALog&&(isNativeConsoleHasALog="function"==typeof nativeConsole.alog),isNativeConsoleHasALog&&nativeConsole.alog("[LynxJSSDK]"+t)}var EventEmitter=function(){function t(t){this._internal_callNativeModule=t,this._events=new Map}return t.prototype.addListener=function(t,e,r){var n=this._events.get(t);"keyboardstatuschanged"==t&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!0]),n?n.push({listener:e,context:r}):this._events.set(t,[{listener:e,context:r}])},t.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var r=this._events.get(t),n=0;Array.isArray(r)&&(r.some((function(t){if(e===t.listener)return!0;n++}))&&r.splice(n,1));"keyboardstatuschanged"==t&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!1])},t.prototype.emit=function(t,e){var r=this,n=this._events.get(t);Array.isArray(n)?n.forEach((function(t){var n=t.listener,o=t.context;"function"==typeof n&&n.apply(o||r,e)})):nativeConsole.warn("emit event "+t+" is not register.")},t.prototype.removeAllListerners=function(t){"string"!=typeof t?this._events=new Map:this._events.delete(t)},t.prototype.removeAllListeners=function(t){"string"!=typeof t?this._events=new Map:this._events.delete(t)},t.prototype.trigger=function(t,e){var r=this,n=this._events.get(t);Array.isArray(n)?("string"==typeof e&&(e=JSON.parse(e)),n.forEach((function(t){var n=t.listener,o=t.context;"function"==typeof n&&n.call(o||r,e)}))):nativeConsole.warn("trigger event "+t+" is not register.")},t.prototype.toggle=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.emit(t,e)},t}(),ListenerKeys={onSetup:"lynx.performance.timing.onSetup",onUpdate:"lynx.performance.timing.onUpdate"},Performance=function(){function t(t){this._emitter=t}return t.prototype.addTimingListener=function(t){this._emitter.addListener(ListenerKeys.onSetup,t.onSetup,t),this._emitter.addListener(ListenerKeys.onUpdate,t.onUpdate,t)},t.prototype.removeTimingListener=function(t){this._emitter.removeListener(ListenerKeys.onSetup,t.onSetup),this._emitter.removeListener(ListenerKeys.onUpdate,t.onUpdate)},t.prototype.removeAllTimingListener=function(){this._emitter.removeAllListeners(ListenerKeys.onSetup),this._emitter.removeAllListeners(ListenerKeys.onUpdate)},t}();function needPromisePolyfill(){return!0}function getPromiseMaybePolyfill(t,e,r){if(needPromisePolyfill()){var n=_global.getPromise;return"function"==typeof n?n({setTimeout:t,onUnhandled:e,clearTimeout:r}):_global.Promise}return _global.Promise}var IntersectionObservationTarget=function(){function t(t,e){this._selector=t,this._callback=e}return t.prototype.invokeCallback=function(t){this._callback(t)},t}(),IntersectionObserver=function(){function t(t,e,r){this._id=t,this._intersectionObserverModule=e,this._manager=r,this._observationTargets=[],this._defaultMargins={left:0,right:0,top:0,bottom:0}}return t.prototype.relativeTo=function(t,e){return this._intersectionObserverModule.relativeTo(this._id,t,e||this._defaultMargins),this},t.prototype.relativeToViewport=function(t){return this._intersectionObserverModule.relativeToViewport(this._id,t||this._defaultMargins),this},t.prototype.observe=function(t,e){this._observationTargets.push(new IntersectionObservationTarget(t,e)),this._intersectionObserverModule.observe(this._id,t,this._observationTargets.length-1)},t.prototype.disconnect=function(){this._intersectionObserverModule.disconnect(this._id),this._manager.removeObserver(this._id)},t.prototype.invokeCallback=function(t,e){t<this._observationTargets.length&&this._observationTargets[t].invokeCallback(e)},t}(),IntersectionObserverManager=function(){function t(t){this._nativeModules=t,this._observerId=0,this._observers={},this._defaultOptions={thresholds:[0],initialRatio:0,observeAll:!1}}return t.prototype.createIntersectionObserver=function(t,e){var r=this._nativeModules.IntersectionObserverModule,n=new IntersectionObserver(this._observerId,r,this);return this._observers[this._observerId]=n,r.createIntersectionObserver(this._observerId,t,e||this._defaultOptions),this._observerId++,n},t.prototype.getObserver=function(t){return this._observers[t]},t.prototype.removeObserver=function(t){this._observers[t]=null},t}(),Worker=function(){function t(t,e,r,n){this._url=t,this._name=e,this._workerId=r,this._nativeApp=n}return t.createWorker=function(e){return function(r,n){return new t(r,n,e.createWorker(r,n),e)}},t.prototype.postMessage=function(t){this._nativeApp.postMessage(this._workerId,t)},t.prototype.onMessage=function(t){this._nativeApp.onMessage(this._workerId,t)},t.prototype.onException=function(t){this._nativeApp.onException(this._workerId,t)},t.prototype.onTerminate=function(t){this._nativeApp.onTerminate(this._workerId,t)},t.prototype.terminate=function(){this._nativeApp.terminate(this._workerId)},t}(),Lynx=function(t,e,r,n){var o=this;this.getNativeApp=t,this.getApp=e,this.Promise=r,this.getNativeLynx=n,this.__globalProps=this.getNativeLynx().__globalProps,this._switches={},this.nativeDataChanged=!1,this.performance=this.getApp().performance,this.setTimeout=this.getApp().wrapReport(this.getNativeApp().setTimeout,"setTimeout Error"),this.setInterval=this.getApp().wrapReport(this.getNativeApp().setInterval,"setInterval Error"),this.clearInterval=this.getNativeApp().clearInterval,this.clearTimeout=this.getNativeApp().clearTimeout,this.getComponentContext=function(t,e,r){return o.getNativeLynx().getComponentContext(t,e,r)},this.requestAnimationFrame=function(t){return o.getNativeLynx().requestAnimationFrame(t)},this.cancelAnimationFrame=function(t){return o.getNativeLynx().cancelAnimationFrame(t)},this.createElement=function(t,e){return o.getNativeLynx().createElement(t,e)},this.fetchDynamicComponent=function(t,e,r){return o.getNativeLynx().fetchDynamicComponent(t,e,r)},this.triggerLepusGlobalEvent=function(t,e){return o.getNativeApp().triggerLepusGlobalEvent(t,e)},this.requireModule=function(t){if("string"!=typeof t||!t)throw new Error("importScript should load with one path");return o.getNativeApp().loadScript(t),(0,_global.initBundle)({tt:o.getApp()})},this.requireModuleAsync=function(t,e){if("string"!=typeof t||!t)throw new Error("importScript async should load with one path");o.getNativeApp().loadScriptAsync(t,(function(t){var r,n;t?r=new Error("loadScriptAsync: "+o.getNativeApp().id+" error: "+t):n=(0,_global.initBundle)({tt:o.getApp()}),e&&e(r,n)}))},this.setSharedData=function(t,e){_global.sharedData[t]=e;var r={};r[t]=e,_global.shareDataSubject.notifyDataChange(r)},this.getSharedData=function(t){return _global.sharedData[t]},this.registerSharedDataObserver=function(t){return _global.shareDataSubject.registerObserver(t)},this.removeSharedDataObserver=function(t){return _global.shareDataSubject.removeObserver(t)},this.createSelectorQuery=function(){return SelectorQuery.newEmptyQuery(o.getNativeApp(),o.getNativeApp().nativeModuleProxy.LynxUIMethodModule)},this.reportError=function(t){var e;if("[object Error]"===Object.prototype.toString.call(t))e=t;else{var r=void 0;r="string"!=typeof t?JSON.stringify(r):t,e=new Error(r)}o.getApp().handleError(new UserRuntimeError(e.message,e.stack),e)},this.loadDynamicComponent=function(t,e){return void 0===e&&(e={}),new o.Promise((function(r,n){o.getNativeLynx().fetchDynamicComponent(t,e,(function(t){t&&0==t.code?r(t):n(t)}))}))},this.getJSModule=function(t){return o.getApp().getJSModule(t)},this.registerModule=function(t,e){return o.getApp().registerModule(t,e)},this.createWorker=Worker.createWorker(this.getNativeApp())},BaseApp=function(){function t(t){var e=this;this.modules={},this._apiList={},this.componentEventBatch={},this._lazyCallableModules=new Map,this.$isErrorHandling=!1;var r=t.nativeApp,n=t.params,o=t.lynx;this._nativeApp=r,this.nativeAppId=r.id,this._params=n,this.setTimeout=r.setTimeout,this.setInterval=r.setInterval,this.clearInterval=r.clearInterval,this.clearTimeout=r.clearTimeout,this.NativeModules=r.nativeModuleProxy,this.NetworkingModule=r.nativeModuleProxy.NetworkingModule,this.BDLynxModule=r.nativeModuleProxy.BDLynxModule,this.LynxUIMethodModule=r.nativeModuleProxy.LynxUIMethodModule,this.LynxTestModule=r.nativeModuleProxy.LynxTestModule,this._intersectionObserverManager=new IntersectionObserverManager(this.NativeModules),this.GlobalEventEmitter=new EventEmitter(this.__internal__callNativeModule.bind(this)),this.performance=new Performance(this.GlobalEventEmitter);var a=this.setupPromise(r.setTimeout,r.clearTimeout);this.lynx=new Lynx((function(){return r}),(function(){return e}),a,(function(){return o})),this.setupJSModule(),this.setupIntersectionApi()}return t.prototype.destroy=function(){this._nativeApp=null,this._params=null,this.GlobalEventEmitter=null,this._lazyCallableModules=null},Object.defineProperty(t.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"apiList",{set:function(t){this._apiList=__assign(__assign({},this._apiList),t)},enumerable:!1,configurable:!0}),t.prototype.wrapReport=function(t,e){var r=this;function n(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(this,n)}catch(t){r.handleError(new UserRuntimeError(e+": "+r._nativeApp.id+" error: "+t.message,t.stack),t)}}}return function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Function.prototype.apply.call(t,void 0,__spreadArray([n(e)],__read(r)))}},t.prototype.setupPromise=function(t,e){var r=this,n=getPromiseMaybePolyfill(t,(function(t,e){try{e.stack||(e=new Error("wrapError-"+JSON.stringify(e))),e&&r.handleError(new UserRuntimeError("unhandled rejection: "+e.message,e.stack),e)}catch(t){}}),e);return this.resolvedPromise=n.resolve(),n},t.prototype.setupIntersectionApi=function(){var t=this;this._apiList.createIntersectionObserver=function(e,r){var n=e.componentId,o=void 0===n?"":n;return t._intersectionObserverManager.createIntersectionObserver(o,r)},this.lynx.createIntersectionObserver=this._apiList.createIntersectionObserver},t.prototype.setupJSModule=function(){this.registerModule("GlobalEventEmitter",this.GlobalEventEmitter)},t.prototype.onIntersectionObserverEvent=function(t,e,r){var n=this._intersectionObserverManager.getObserver(t);n&&n.invokeCallback(e,r)},t.prototype.saveComponentEventBatch=function(t,e,r){this.componentEventBatch[t]||(this.componentEventBatch[t]=[]),this.componentEventBatch[t].push({eventName:e,data:r})},t.prototype.handleError=function(t,e){reportError(t,this._nativeApp,{originError:e,__sourcemap__release__:this.__sourcemap__release__})},t.prototype.__internal__callNativeModule=function(t,e,r){var n=this._nativeApp.nativeModuleProxy[t];if(n){var o=n[e];o&&Function.prototype.apply.call(o,void 0,r)}},t.prototype.registerModule=function(t,e){this._lazyCallableModules[t]=e},t.prototype.getJSModule=function(t){return this._lazyCallableModules[t]},t.prototype.requireModule=function(t){return this.lynx.requireModule(t)},t.prototype.requireModuleAsync=function(t,e){return this.lynx.requireModuleAsync(t,e)},t.prototype.reportError=function(t){return this.lynx.reportError(t)},t}(),ReactApp=function(_super){function ReactApp(t){var e=_super.call(this,t)||this,r=t.params;e._componentMap={},e._dynamicComponentMap={},e._componentInstance={},e._reactLynx={},e.rlynxVersion=null==r?void 0:r.rlynxVersion,e.globalErrorEvents=[],e._propsMap=new propsMap,e._reactLynx.propsMap=e._propsMap,e._reactLynx.genPropsId=genPropsId,e._reactLynx.ReactComponent=ReactComponent,e._reactLynx.createRef=function(){return{current:null,id:null}},e._getComponent=e.getComponent,e.lynx.onError=function(t){return e.subscribeGlobalError(t)},e.lynx.nativeDataChanged=!1,e.setTimeout=e.lynx.setTimeout,e.setInterval=e.lynx.setInterval,e.clearTimeout=e.lynx.clearTimeout,e.clearInterval=e.lynx.clearInterval,_global["installNapiModulesOnRT"+e.nativeAppId]&&_global["installNapiModulesOnRT"+e.nativeAppId](e.lynx),e.lynx.loadModule&&e.lynx.loadModule("canvas",e.lynx);var n=_global.SystemInfo.enableKrypton&&e._nativeApp.enableCanvasOptimization;initCanvas(e,e.lynx.Promise,n),Hooks.mountHooks(e,{catchError:function(t){var r=new InternalRuntimeError("Hooks: "+e._nativeApp.id+" error: "+t.message,t.stack);e.handleError(r,t)}}),e._reactLynx.ReactFcComponent=ReactFcComponent,e._reactLynx.useReducer=Hooks.useReducer,e._reactLynx.useState=Hooks.useState,e._reactLynx.useEffect=Hooks.useEffect,e._reactLynx.useMemo=Hooks.useMemo,e._reactLynx.useCallback=Hooks.useCallback,e._reactLynx.useInstance=Hooks.useInstance,e._reactLynx.useRef=Hooks.useRef,e._reactLynx.createRef=function(t){return{current:t,id:null}}}return __extends(ReactApp,_super),ReactApp.prototype.subscribeGlobalError=function(t){this.globalErrorEvents.push(t)},ReactApp.prototype.publishGlobalError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.globalErrorEvents&&this.globalErrorEvents.length>0&&this.globalErrorEvents.forEach((function(e){e.apply(void 0,__spreadArray([],__read(t)))}))},ReactApp.prototype.handleError=function(t,e){_super.prototype.handleError.call(this,t,e),this.$isErrorHandling||(this.$isErrorHandling=!0,this.publishGlobalError(t,t.message,t.stack),this.dispatchError(t.message||t.stack),this.$isErrorHandling=!1)},ReactApp.prototype.Card=function(t){var e=this;this._cardComponentClass=t;try{var r=e._params||{},n=r.initData,o=r.updateData,a=r.initConfig;if(t.__config={$type:"card",appInstance:e,initData:n},e.appInstance=new t(t.defaultProps),e.appInstance.$isInCtor=!1,n&&"object"==typeof n&&e.initCardData(n),o&&"object"==typeof o)try{var i=e.appInstance;Object.keys(o).forEach((function(t){i.state[t]=o[t]})),isFunctionComponent(i)&&Hooks.syncInsHookState(i,o),this.lynx.nativeDataChanged=!0}catch(t){var s=t||{},_=s.message,p=s.stack,c=new InternalRuntimeError("initCardData "+n+" error: "+(_="native updateCardData error in Card:  "+_),p);this.handleError(c,t)}a&&"object"==typeof a&&e.processCardConfig(a)}catch(t){c=new InternalRuntimeError("create Card(): "+e._nativeApp.id+" error: "+t.message,t.stack);this.handleError(c,t)}},ReactApp.prototype.Component=function(t){var e=_global.globDynamicComponentEntry,r=_global.globComponentRegistPath;e||(e=DEFAULT_ENTRY),this._componentMap[e]||(this._componentMap[e]={}),this._componentMap[e][r]=t},ReactApp.prototype.initCardData=function(t){try{var e=this.appInstance;Object.keys(t).forEach((function(r){hasProperty(e.state,r)||(e.state[r]=t[r])}))}catch(e){var r=e||{},n=r.message,o=r.stack,a=new InternalRuntimeError("initCardData "+t+" error: "+(n="native initCardData error in ReactCard:  "+n),o);this.handleError(a,e)}},ReactApp.prototype.processCardConfig=function(t){var e=this.appInstance;try{if(t&&"object"==typeof t){var r=t[CARD_CONFIG_STR];if(isObject(r)){var n=r.theme;isObject(n)&&(e[CARD_CONFIG_THEME]=n,"function"==typeof e[CARD_CONFIG_THEME_UPDATED]&&e[CARD_CONFIG_THEME_UPDATED](n))}}}catch(t){var o=new InternalRuntimeError("processCardConfig Card(): "+this._nativeApp.id+" error: "+t.message,t.stack);this.handleError(o,t)}},ReactApp.prototype.onReactCardRender=function(t,e){var r=this.appInstance;if(r)if("string"==typeof t&&(t=JSON.parse(t)),r.$cardInit){this.lynx.nativeDataChanged=!0;try{var n=this.processVersionsAndCheckForConflict(t,r);if(t&&"object"==typeof t&&Object.keys(t).forEach((function(e){isNull(t[e])||(r.state[e]=t[e]),isFunctionComponent(r)&&Hooks.syncInsHookState(r,t,!0)})),n)return void this.flushNative(r);if(!e)return;var o={},a={};r.$hasDerivedFunction&&!r.$shouldIgnoreLepusDataProcessor&&(o=r.$class.getDerivedStateFromProps(r.props||{},r.state)||{},a=diffData(r.state,o),r.state=Object.assign(r.state,o));var i=r.executeJSRender()||{},s=diffData(r.state,i);r.state=Object.assign(r.state,i);var _=Object.assign(a,s);Object.keys(_).length&&r.updateDataToNative(_)}catch(e){var p=e||{};u=p.message,l=p.stack,h=new InternalRuntimeError("onReactCardRender not first "+t+" error: "+u,l);this.handleError(h,e)}}else try{r.$cardInit=!0,this.flushNative(r)}catch(e){var c=e||{},u=c.message,l=c.stack,h=new InternalRuntimeError("onReactCardRender first "+t+" error: "+u,l);this.handleError(h,e)}else alog("onReactCardRender execution stopped because card creation failed")},ReactApp.prototype.updateGlobalProps=function(t){var e=this;try{var r=this.appInstance;if(!r)return;Object.keys(t).forEach((function(r){var n=t[r];e.lynx.__globalProps[r]=n})),"function"==typeof r.onGlobalPropsChanged&&r.onGlobalPropsChanged.call(r,t)}catch(e){var n=e||{},o=n.message,a=n.stack;this.handleError(new InternalRuntimeError("updateGlobalProps "+t+" error: "+o,a),e)}},ReactApp.prototype.onReactComponentCreated=function(t,e,r,n,o,a){var i=this;nativeConsole.profile("onReactComponentCreated::"+t),t.startsWith("/")&&(t=t.substr(1));var s=a?this._componentMap[a][t]:this._componentMap[DEFAULT_ENTRY][t];s.defaultProps=s.defaultProps||{};var _=(r?this._propsMap.getProps(r.propsId):null)||{},p=Object.keys(s.defaultProps),c=Object.keys(_),u=__spreadArray([],__read(p));c.forEach((function(t){u.includes(t)||u.push(t)}));var l={};Object.keys(s.defaultProps).filter((function(t){c.includes(t)&&null===_[t]?l[t]=null:l[t]=s.defaultProps[t]}));var h=shallowMergeEx(r,_);h=shallowMergeEx(l,h,!0),s.__config={$type:"component",appInstance:this,__sourcemap__release__:this.__sourcemap__release__,componentId:e,initNativeStateVersion:n[REACT_NATIVE_STATE_VERSION_KEY]};var f=new s(h);f.$isInCtor=!1,n&&"object"==typeof n&&REACT_NATIVE_STATE_VERSION_KEY in n&&(f.$nativeStateVersion=n[REACT_NATIVE_STATE_VERSION_KEY]),f.componentPath=t,f.entryName=a,this.setComponent(e,f,o);var d=[];Object.keys(f.state).forEach((function(t){hasProperty(n,t)&&(null!==n[t]&&void 0!==n[t]||null===f.state[t]||void 0===f.state[t])||d.push(t)}));var v=!1;if(r.$$onlyPropsId)v=hasJSOnlyData(_);else{var y=Object.keys(r);v=u.filter((function(t){return!y.includes(t)||null===r[t]})).length>0}var E=null;f.$hasDerivedFunction&&(v||d.length||!f.$shouldIgnoreLepusDataProcessor)?(E=f.$class.getDerivedStateFromProps(f.props,f.state),f.state=Object.assign(f.state,E||{})):f.$hasDerivedFunction&&(f.state=shallowMergeEx(f.state,n,!0));var m=f.executeJSRender()||{};if(f.$throwError)nativeConsole.profileEnd();else{f.state=Object.assign(f.state,m);var g=diffData(n,E);d.push.apply(d,__spreadArray(__spreadArray([],__read(Object.keys(g))),__read(Object.keys(m))));for(var A={},R=0;R<d.length;R++){var C=d[R];A[C]=f.state[C]}f.updateDataToNative(filterReactComponentData(A));var b=this.componentEventBatch[e];b&&(this.componentEventBatch[e]=void 0,Array.isArray(b)&&b.forEach((function(t){i.publicComponentEvent(e,t.eventName,t.data)}))),nativeConsole.profileEnd()}},ReactApp.prototype.onReactComponentRender=function(t,e,r,n){var o,a=this.getComponent(t);if(a){nativeConsole.profile("onReactComponentRender::"+a.componentPath);var i,s=shallowClone(this._propsMap.getProps(e.propsId));if(i=(null===(o=this.lynx._switches)||void 0===o?void 0:o.fixMergeOrder)?shallowMergeEx(e,s):shallowMergeEx(s,e),Object.keys(i).forEach((function(t){a.props[t]=i[t]})),this.processVersionsAndCheckForConflict(r,a))return this.flushNative(a),void nativeConsole.profileEnd();if(r&&"object"==typeof r&&Object.keys(r).forEach((function(t){isNull(r[t])||(a.state[t]=r[t]),isFunctionComponent(a)&&Hooks.syncInsHookState(a,r,!0)})),n){var _=!1;if(e.$$onlyPropsId)_=hasJSOnlyData(s);else{var p=Object.keys(s),c=Object.keys(e);_=p.filter((function(t){return!c.includes(t)||null===e[t]})).length>0}var u={},l={};!a.$hasDerivedFunction||a.$shouldIgnoreLepusDataProcessor&&!_?a.$hasDerivedFunction&&(a.state=Object.assign(a.state,r||{})):(u=a.$class.getDerivedStateFromProps(a.props,a.state),l=diffData(a.state,u),a.state=Object.assign(a.state,u||{}));var h=a.executeJSRender()||{};if(a.$throwError)nativeConsole.profileEnd();else{var f={};(a.$shouldDiffState||isObject(h)&&Object.keys(h).length>0)&&(f=diffData(a.state,h)),a.state=Object.assign(a.state,h||{});var d=Object.assign(l,f);Object.keys(d).length&&a.updateDataToNative(d),nativeConsole.profileEnd()}}else nativeConsole.profileEnd()}else alog("onReactComponentRender execution stopped because card creation failed")},ReactApp.prototype.processVersionsAndCheckForConflict=function(t,e){var r=!1;return t&&"object"==typeof t&&(REACT_NATIVE_STATE_VERSION_KEY in t&&(e.$nativeStateVersion=t[REACT_NATIVE_STATE_VERSION_KEY]),REACT_JS_STATE_VERSION_KEY in t&&t[REACT_JS_STATE_VERSION_KEY]<e.$jsStateVersion&&(r=!0),delete t[REACT_NATIVE_STATE_VERSION_KEY],delete t[REACT_JS_STATE_VERSION_KEY]),r},ReactApp.prototype.flushNative=function(t){var e={};t.$hasDerivedFunction&&(e=t.$class.getDerivedStateFromProps(t.props,t.state)),t.state=Object.assign(t.state,e||{}),t.state=Object.assign(t.state,t.executeJSRender()||{}),t.$throwError||t.updateDataToNative(filterReactComponentData(t.state))},ReactApp.prototype.reactUpdateComponent=function(t){var e=t.$hasUseDidUpdateLifecycleParams||void 0===t.$hasUseDidUpdateLifecycleParams;if(t.$init){if(t.$hasDidUpdateLifecycle){var r=e?deepClone(t.props):void 0,n=e?deepClone(t.state):void 0;t.componentDidUpdate(t.prevProps,t.prevState),t.prevProps=r,t.prevState=n}}else t.$init=!0,t.$hasDidUpdateLifecycle&&e&&(t.prevProps=deepClone(t.props),t.prevState=deepClone(t.state)),t.componentDidMount(),t.$componentState=1;isFunctionComponent(t)&&Hooks.executeEffects(t),t.$catchError&&t.$hasDidCatchLifecycle&&(t.componentDidCatch(t.$catchError),t.$catchError=null)},ReactApp.prototype.onReactCardDidUpdate=function(){var t=this.appInstance;t?(nativeConsole.profile("onReactComponentDidUpdate::card"),this.reactUpdateComponent(t),nativeConsole.profileEnd(),this.lynx.nativeDataChanged=!1):alog("onReactCardDidUpdate execution stopped because card creation failed")},ReactApp.prototype.onReactComponentDidUpdate=function(t){var e=this.getComponent(t);e?(nativeConsole.profile("onReactComponentDidUpdate::"+e.componentPath),this.reactUpdateComponent(e),nativeConsole.profileEnd()):alog("onReactComponentDidUpdate execution stopped because card creation failed")},ReactApp.prototype.onReactComponentDidCatch=function(t,e){var r=this.getComponent(t);r?(nativeConsole.profile("onReactComponentDidCatch::"+r.componentPath),r.$hasDidCatchLifecycle&&r.componentDidCatch(e),nativeConsole.profileEnd()):alog("onReactComponentDidCatch execution stopped because card creation failed")},ReactApp.prototype.onReactComponentUnmount=function(t){var e=this,r=this.getComponent(t);if(r){if(nativeConsole.profile("onReactComponentUnmount::"+r.componentPath),isObject(r.__childrenPropsIds))Object.keys(r.__childrenPropsIds).forEach((function(t){e._propsMap.deleteProps(t)})),r.__childrenPropsIds={};else{var n=r.props?r.props.propsId:null;n&&this._propsMap.deleteProps(n)}isFunctionComponent(r)&&Hooks.cleanUpHooks(r),r.componentWillUnmount(),r.$componentState=2,delete this._componentInstance[t],nativeConsole.profileEnd()}else alog("onReactComponentUnmount execution stopped because card creation failed")},ReactApp.prototype.onNativeAppReady=function(t){},ReactApp.prototype.callFunction=function(t,e,r){if(this.appInstance)try{var n=this.getJSModule(t);"function"==typeof n[e]&&n[e].apply(n,r)}catch(r){var o=r||{},a=o.message,i=o.stack,s=new InternalRuntimeError("callFunction "+t+"/"+e+" error: "+a,i);this.handleError(s,r)}},ReactApp.prototype.setComponent=function(t,e,r){this._componentInstance[t]=e,e.parentId=r},ReactApp.prototype.getComponent=function(t){return this._componentInstance[t]},ReactApp.prototype.getComponentOptions=function(t,e){return e?this._dynamicComponentMap[e][t]:this._dynamicComponentMap[DEFAULT_ENTRY][t]},ReactApp.prototype.publishEvent=function(t,e){var r=this,n=r.appInstance;try{if("function"==typeof n[t])return void r.handlerEvent(n,t,e);throw new Error("Do not have "+t+"\n        handler in Card "+r._nativeApp.id)}catch(e){var o=e||{},a=o.message,i=o.stack,s=new InternalRuntimeError("publishEvent "+t+" error: "+a,i);this.handleError(s,e)}},ReactApp.prototype.publicComponentEvent=function(t,e,r){var n=this,o=n.getComponent(t);if(o)try{"function"==typeof o[e]&&n.handlerEvent(o,e,r)}catch(r){var a=r||{},i=a.message,s=a.stack,_=new InternalRuntimeError("publicComponentEvent "+t+"/"+e+" error: "+i,s);this.handleError(_,r)}else n.saveComponentEventBatch(t,e,r)},ReactApp.prototype.handlerEvent=function(t,e,r){var n=t,o=[],a=[],i={},s=r.type,_=r.currentTarget.dataset||{};r.preventDefault=function(){},r.stopPropagation=function(){},Object.keys(_).forEach((function(t){var e=t.toLocaleLowerCase();if(/^e/.test(e)&&(e=e.replace(/^e/,"")).indexOf(s)>=0){var r=e.replace(s,"");/^(a[a-z]|so)$/.test(r)&&(i[r]=_[t])}}));var p=null;"so"in i&&(n="this"!==i.so?i.so:t,p="this"!==i.so?i.so:null,delete i.so),isObject(i)&&(a=Object.keys(i).sort().map((function(t){return i[t]}))),o=-1===e.indexOf("funPrivate")?__spreadArray(__spreadArray([],__read(a)),[r]):__spreadArray(__spreadArray([p],__read(a)),[r]),t[e].apply(n,o)},ReactApp.prototype.callDestroyLifetimeFun=function(){var t=this;try{Object.keys(this._componentInstance).forEach((function(e){t.onReactComponentUnmount(e)})),this.appInstance.componentWillUnmount()}catch(t){}},ReactApp.prototype.destroy=function(){try{isFunctionComponent(this.appInstance)&&Hooks.cleanUpHooks(this.appInstance),this.modules=null,this._params=null,this._componentMap=null,this._propsMap=null,this.appInstance=null,this.componentEventBatch=null,this._heliumData&&clearHeliumCanvas(this),_super.prototype.destroy.call(this)}catch(t){}},ReactApp.prototype.onAppEnterBackground=function(t){try{this.appInstance&&isFunction(this.appInstance.componentDidHide)&&this.appInstance.componentDidHide(),this.GlobalEventEmitter.emit("onHide",t)}catch(t){var e=t||{},r=e.message,n=e.stack,o=new InternalRuntimeError("onAppEnterBackground error: "+r,n);this.handleError(o,t)}},ReactApp.prototype.onAppEnterForeground=function(t){try{this.appInstance&&isFunction(this.appInstance.componentDidShow)&&this.appInstance.componentDidShow(),this.GlobalEventEmitter.emit("onShow",t)}catch(a){var e=a||{},r=e.message,n=e.stack,o=new InternalRuntimeError("onAppEnterForeground "+t+" error: "+r,n);this.handleError(o,a)}},ReactApp.prototype.onAppError=function(t){var e=new InternalRuntimeError("JS error: "+t,t);reportError(e,this._nativeApp,{__sourcemap__release__:this.__sourcemap__release__}),this.dispatchError(t),this.publishGlobalError(e,"onAppError, JS error: "+t,null)},ReactApp.prototype.dispatchError=function(t){this.appInstance&&isFunction(this.appInstance.componentDidCatch)&&this.appInstance.componentDidCatch(t)},ReactApp.prototype.onAppFirstScreen=function(t){},ReactApp.prototype.onAppReload=function(t){var e;null===(e=this.appInstance)||void 0===e||e.componentWillUnmount(),this._propsMap.clear(),this._heliumData&&clearHeliumCanvas(this),this._params.updateData=t;var r=_global.SystemInfo.enableKrypton&&this._nativeApp.enableCanvasOptimization;initCanvas(this,this.lynx.Promise,r),this.Card(this._cardComponentClass)},ReactApp.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=params&&params.dynamicComponentEntry?params.dynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(t){var throwError=new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+t.message,t.stack);that.handleError(throwError,t)}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),that._reactLynx,that.nativeAppId,void 0,LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},ReactApp.prototype.define=function(t,e,r){var n=this,o=r||DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][t]={runed:!1,factory:e.bind(n)}},ReactApp.prototype.bindComponentWithRefId=function(t,e,r){if("card"===t)this.appInstance.$pureData[r]=e,this.appInstance.bindSingleRef(r);else{var n=this._componentInstance[t];isObject(n)?(n.$pureData[r]=e,n.bindSingleRef(r)):(this.appInstance.$pureData[r]=e,this.appInstance.bindSingleRef(r))}},ReactApp}(BaseApp);function pathProcess(t){var e=t.match(/(.*)\/([^/]+)?$/);return(null==e?void 0:e[1])?e[1]:"./"}function inRequire(t){var e=this,r=pathProcess(t);return function(t){var n=[],o=(r+"/"+t).split("/"),a=o.length;if("string"!=typeof t)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+t+" in app: "+e._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var _=n.join("/");return _.endsWith(".js")||(_+=".js"),e.require(_)}}var CreateApp=function(t){function e(e,r,n,o){var a=t.call(this,{type:"card",resolvedPromise:n})||this,i=a;a.__proxy=o,a.$parent=null,i.$children=[],i._queue=[],i._microTaskPending=!1,i._nativeApp=r,a._options=e,i.data=e.data||{},delete e.data,i.theme=e.theme||{},delete e.theme,i._uiModule=a._nativeApp.nativeModuleProxy.LynxUIMethodModule;var s=Object.assign({},lifeCycleFun,e),_=e.methods||{};return Object.keys(_).forEach((function(t){"function"==typeof _[t]&&(i[t]=wrapUserFunction("at Card methods: "+t,i,_[t]).bind(i))})),Object.keys(s).forEach((function(t){"function"==typeof s[t]?i[t]=wrapUserFunction("at Card "+t,i,s[t]).bind(i):i[t]=deepClone(s[t])})),a.GlobalEventEmitter=o.GlobalEventEmitter,a.performance=o.performance,a}return __extends(e,t),e.prototype.setData=function(e,r){var n,o=this;try{var a=getDataType(e);if("object"!==a)throw new Error("setData's first param must be object, you pass "+a);var i=getDataType(r);if(r&&"function"!==i)throw new Error("setData's second param must be function, you pass "+i);t.prototype.updateData.call(this,e),t.prototype.dataQueueUpdate.call(this,o,e,wrapUserFunction("at card setData/dataQueueUpdate",o,r).bind(o),null===(n=this.__proxy.lynx._switches)||void 0===n?void 0:n.enableFixBatchedUpdateOrder)}catch(t){var s=t||{},_=s.message,p=s.stack;reportError(new InternalRuntimeError("setData error: "+(_="setData err: "+_),p),o._nativeApp),o.onError(_)}},e.prototype.getNodeRef=function(t){return new NodeRef(this._uiModule,"",t)},e.prototype.createSelectorQuery=function(t){return t?SelectorQuery.fromQuery(t,this.componentId):SelectorQuery.newEmptyQuery(this._nativeApp,this._uiModule)},e.prototype.getElementById=function(t){return new Element("card",t,this.__proxy.lynx)},e.prototype.getRoot=function(){return new Element("card",void 0,this.__proxy.lynx)},e.prototype.selectComponent=function(t,e){var r=this,n=getDataType(e);if(e&&"function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent("card",t,!0,wrapUserFunction("at card selectComponent",this,(function(t){Array.isArray(t)&&e(r.__proxy.getComponent(t[0]))})).bind(this))},e.prototype.updateTheme=function(t,e){void 0===e&&(e=!1);var r=this;try{var n=getDataType(t);if("object"!==n)throw new Error("updateTheme's first param must be object, you pass "+n);var o={};e?Object.assign(o,t):Object.assign(o,r.theme,t),Object.keys(o).forEach((function(t){o[t]||delete o[t]})),r._nativeApp.updateData({__card_config_:{theme:o}})}catch(t){var a=t||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("updateTheme error: "+(i="updateTheme err: "+i),s),r._nativeApp),r.onError(i)}},e.prototype.registerModule=function(t,e){return this.__proxy.registerModule(t,e)},e.prototype.getJSModule=function(t){return this.__proxy.getJSModule(t)},e.prototype.addGlobalEventListener=function(t,e,r){this.getJSModule("GlobalEventEmitter").addListener(t,e,r)},e.prototype.setSharedData=function(t,e){_global.sharedData[t]=e},e.prototype.getSharedData=function(t){return _global.sharedData[t]},e}(BaseInstance);function optionProcess(t){return __assign({},t)}var behaviorBookmarks=new Map;function mixinBehaviors(t){var e={created:[t.created],attached:[t.attached],ready:[t.ready],moved:[t.moved],detached:[t.detached]};Array.isArray(t.behaviors)&&forEachRight(t.behaviors,(function(t){var r=behaviorBookmarks.get(t);r&&componentLifeCycles.forEach((function(t){"function"==typeof r[t]&&e[t].push(r[t])}))})),componentLifeCycles.forEach((function(r){t[r]=function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e[r].forEach((function(e){return e.apply(t,n)}))}}))}function createBehavior(t,e){var r=t||{},n=r.created,o=void 0===n?noop$1:n,a=r.attached,i=void 0===a?noop$1:a,s=r.ready,_=void 0===s?noop$1:s,p=r.moved,c=void 0===p?noop$1:p,u=r.detached,l=void 0===u?noop$1:u;t=__assign({},t);var h=Object.assign(t,{created:o,attached:i,ready:_,moved:c,detached:l}),f=__assign({},h);return mixinBehaviors(f),f}function registerBehavior(t){try{if(isObject(t)){var e=guid(),r=Object.keys(t).reduce((function(e,r){return componentLifeCycles.includes(r)&&"function"==typeof t[r]&&(e[r]=t[r]),e}),{});return behaviorBookmarks.set(e,r),e}}catch(t){var n=t||{},o=n.message,a=n.stack;this.handleError(new InternalRuntimeError("registerBehavior  "+o,a),t)}}var Component=function(t){function e(e,r,n,o){var a=t.call(this,{type:"component",componentId:e,resolvedPromise:o,__sourcemap__release__:r.__sourcemap__release__})||this,i=a,s=deepClone(n),_=(s=createBehavior(s)).methods||{},p=s.pageLifetimes||{},c=s.lifetimes||{};i.$parent=null,i.$children=[],i._initDataUpdated=!1,i._appInstance=r.appInstance,i._proxyInstance=r,i.componentId=e,i.behaviors=s.behaviors||[],i._nativeApp=r.nativeApp,i._lifetimes=c,i._pageLifetimes=p,i._uiModule=i._nativeApp.nativeModuleProxy.LynxUIMethodModule,a.GlobalEventEmitter=r.appInstance.GlobalEventEmitter,isObject(s.data)||(s.data={}),isObject(s.properties)||(s.properties={});var u=s.data;for(var l in i._jsInitData=__assign({},u),s.properties)u[l]=s.properties[l].value;return i.data=i.properties=u,i._properties=s.properties||{},Object.keys(_).forEach((function(t){"function"==typeof _[t]&&(i[t]=wrapUserFunction("at component methods "+t,i._appInstance,_[t]).bind(i))})),Object.keys(s).forEach((function(t){var e,r,n;"function"==typeof s[t]?i[t]=wrapUserFunction("at component option "+t,i._appInstance,s[t]).bind(i):(null===(n=null===(r=null===(e=i._proxyInstance)||void 0===e?void 0:e.lynx)||void 0===r?void 0:r._switches)||void 0===n?void 0:n.enableCopyOptions)&&(i[t]=deepClone(s[t]))})),a}return __extends(e,t),e.prototype.updateInitData=function(){var t,e;if(!this._initDataUpdated){var r=this,n=r.componentId,o=r._jsInitData,a=r._nativeInitData,i=void 0===a?{}:a;if(!(null===(e=null===(t=this._appInstance.__proxy.lynx)||void 0===t?void 0:t._switches)||void 0===e?void 0:e.enableReduceInitDataCopy))return this._nativeApp.updateComponentData(n,o,null),void(this._initDataUpdated=!0);var s=Array.isArray(i)?i:Object.keys(i).filter((function(t){return!isNullOrUndef(i[t])})),_=filterTTData(s,o);Object.keys(_).length>0&&this._nativeApp.updateComponentData(n,_,null),this._initDataUpdated=!0}},e.prototype.getNodeRef=function(t){return new NodeRef(this._uiModule,this.componentId,t)},e.prototype.getNodeRefFromRoot=function(t){return new NodeRef(this._uiModule,"",t)},e.prototype.createSelectorQuery=function(t){return t?SelectorQuery.fromQuery(t,this.componentId):SelectorQuery.newEmptyQuery(this._nativeApp,this._uiModule,this.componentId)},e.prototype.getPathFromTarget=function(t,e){this.createSelectorQuery().selectUniqueID(t.uid).path(e).exec()},e.prototype.getElementById=function(t){return new Element(this.componentId,t,this._proxyInstance.lynx)},e.prototype.selectComponent=function(t,e){var r=this,n=getDataType(e);if(e&&"function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent(this.componentId,t,!0,wrapUserFunction("at component selectComponent",this,(function(t){Array.isArray(t)&&e(r._proxyInstance.getComponent(t[0]))})).bind(this))},e.prototype.getJSModule=function(t){return this._proxyInstance.getJSModule(t)},e.prototype.setData=function(e,r){var n,o=this;try{var a=getDataType(e);if("object"!==a)throw new Error("setData's first param must be object, you pass "+a);var i=getDataType(r);if(r&&"function"!==i)throw new Error("setData's second param must be function, you pass "+i);o._initDataUpdated||this.updateInitData(),t.prototype.updateData.call(this,e),t.prototype.dataQueueUpdate.call(this,o._appInstance,e,wrapUserFunction("at Component setData",o._appInstance,r).bind(o),null===(n=o._proxyInstance.lynx._switches)||void 0===n?void 0:n.enableFixBatchedUpdateOrder)}catch(t){var s=t||{},_=s.message,p=s.stack;reportError(new InternalRuntimeError("Component "+(_="setData err: "+_),p),o._nativeApp,{__sourcemap__release__:o.__sourcemap__release__}),o._appInstance.onError(_)}},e.prototype.triggerEvent=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r={});var n=this;try{var o=n.componentId;n._nativeApp.triggerComponentEvent(t,{eventDetail:e,eventOption:r,componentId:o})}catch(t){var a=t||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("Component "+(i="triggerEvent error: "+i),s),n._nativeApp,{__sourcemap__release__:n.__sourcemap__release__}),n._appInstance.onError(i)}},e}(BaseInstance);function componentActivity(t,e,r,n,o){var a=this,i=o||{},s=i.initData,_=i.entryName,p=i.parentId;try{if(!componentLifeCycles.includes(e))return;if("created"===e){n.startsWith("/")&&(n=n.substr(1));var c=a.getComponentOptions(n,_),u=null;if(!isObject(c))throw new Error("component: "+n+" is not exist!");try{u=new Component(r,a,c,t)}catch(t){throw new Error("create component error: "+t)}if(isObject(s)?(u._nativeInitData=s,Object.keys(s).forEach((function(t){hasProperty(u.data,t)||(u.data[t]=s[t])}))):isArray(s)&&(u._nativeInitData=s,u.data.__globalProps=a.lynx.__globalProps,u.data.SystemInfo=_global.SystemInfo),isString(p)){var l=null;(l="card"===p?a.appInstance:a.getComponent(p))&&(u.$parent=l,l.$children.push(u))}a.setComponent(r,u)}var h=a.getComponent(r);if("attached"===e&&!h._initDataUpdated){var f=!0;a.allRemoved&&(f=!a.allRemoved[n]),f&&h.updateInitData(),h._initDataUpdated=!0}if(!h)throw new Error("component instance: "+r+" is not exist");markComponentState(h,e);var d=(h._lifetimes||{})[e]||h[e];if("function"==typeof d&&d(o),"detached"===e){var v=h.$parent,y=(v||{}).$children;if(Array.isArray(y)){var E=[];y.forEach((function(t){t.componentId!==r&&E.push(t)})),v.$children=E}h.$parent=null}}catch(t){var m=t||{},g=m.message,A=m.stack;this.handleError(new InternalRuntimeError("componentActivity "+e+"/"+r+"/"+n+" error: "+g,A),t)}}function markComponentState(t,e){"attached"===e?t.componentState="attached":"detached"===e?t.componentState="detached":"ready"===e?(t.componentState="ready",t.$_internal_shouldStopBatching=!0):"moved"===e?t.componentState="moved":"created"===e&&(t.componentState="created")}function pageLifetimeFun(t,e){void 0===e&&(e={});var r=this._componentInstance||{};Object.keys(r).forEach((function(n){var o=r[n],a=(o._pageLifetimes||{})[t];"function"==typeof a&&a.call(o,e)}))}var UpdateDataType={UPDATE:0,RESET:1},AppProxy=function(_super){function AppProxy(t){var e=_super.call(this,t)||this;e._componentOpts={},e._componentInstance={},e.setTimeout=e.lynx.setTimeout,e.setInterval=e.lynx.setInterval,e.clearTimeout=e.lynx.clearTimeout,e.clearInterval=e.lynx.clearInterval,_global["installNapiModulesOnRT"+e.nativeAppId]&&_global["installNapiModulesOnRT"+e.nativeAppId](e.lynx),e.lynx.loadModule&&e.lynx.loadModule("canvas",e.lynx);var r=_global.SystemInfo.enableKrypton&&e._nativeApp.enableCanvasOptimization;return initCanvas(e,e.lynx.Promise,r),e}return __extends(AppProxy,_super),Object.defineProperty(AppProxy.prototype,"appInstance",{get:function(){return this._appInstance},set:function(t){this._appInstance=t},enumerable:!1,configurable:!0}),AppProxy.prototype.setAllRemoved=function(t){this.allRemoved=t},AppProxy.prototype.handleError=function(t,e){_super.prototype.handleError.call(this,t,e),this.$isErrorHandling||(this.$isErrorHandling=!0,this._appInstance&&isFunction(this._appInstance.onError)&&this._appInstance.onError(t.message||t.stack),this.$isErrorHandling=!1)},AppProxy.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(t){this.handleError(new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+t.message,t.stack),t)}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire$1.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),_global.TaroLynx,that.nativeAppId,that.Behavior.bind(tt),LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},AppProxy.prototype.define=function(t,e,r){var n=this,o=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][t]={runed:!1,factory:e.bind(n)}},AppProxy.prototype.Card=function(t){var e=this,r=_global.globComponentRegistPath;this._cardPath=r,this._cardParams=t;try{var n=e._params||{},o=n.initData,a=n.updateData,i=n.initConfig;e._appInstance=new CreateApp(t,e._nativeApp,this.resolvedPromise,e),o&&"object"==typeof o&&e.initCardData(o),a&&"object"==typeof a&&e.updateCardData(a),i&&"object"==typeof i&&e.processCardConfig(i),e._appInstance.cardState="loaded",e._appInstance.onLoad({}),pageLifetimeFun.call(e,"onLoad")}catch(t){this.handleError(new InternalRuntimeError("create Card: "+e._nativeApp.id+" error: "+t.message,t.stack),t)}},AppProxy.prototype.Behavior=function(t){return registerBehavior.call(this,t)},AppProxy.prototype.Component=function(t){var e=_global.globDynamicComponentEntry,r=_global.globComponentRegistPath,n=optionProcess(t);e||(e=DEFAULT_ENTRY),this._componentOpts[e]||(this._componentOpts[e]={}),this._componentOpts[e][r]=n},AppProxy.prototype.setComponent=function(t,e){this._componentInstance[t]=e},AppProxy.prototype.getComponent=function(t){return this._componentInstance[t]},AppProxy.prototype.getComponentOptions=function(t,e){var r=null;try{r=e?this._componentOpts[e][t]:this._componentOpts[DEFAULT_ENTRY][t]}catch(e){throw new Error("Component ("+t+") is not register. \n please use Component({...}) to register.")}return r},AppProxy.prototype.callDestroyLifetimeFun=function(){try{pageLifetimeFun.call(this,"onDestroy"),this._appInstance.onDestroy()}catch(t){}},AppProxy.prototype.destroy=function(){try{this.modules=null,this._appInstance.cardState="destroyed",this._appInstance=null,this.resolvedPromise=null,this._heliumData&&clearHeliumCanvas(this),_super.prototype.destroy.call(this)}catch(t){}},AppProxy.prototype.publishEvent=function(t,e){var r=this._appInstance,n=r._options[t];try{if("function"==typeof r[t])return void r[t](e);if("function"==typeof n)return void n.call(r,e);throw new Error("Do not have "+t+"\n        handler in Card "+this._nativeApp.id)}catch(e){var o=e||{},a=o.message,i=o.stack;this.handleError(new InternalRuntimeError("publishEvent "+t+" error: "+a,i),e)}},AppProxy.prototype.publicComponentEvent=function(t,e,r){var n=this.getComponent(t);if(n&&n.$_internal_shouldStopBatching)try{"function"==typeof n[e]&&n[e](r)}catch(r){var o=r||{},a=o.message,i=o.stack;this.handleError(new InternalRuntimeError("publicComponentEvent "+t+"/"+e+" error: "+a,i),r)}else this.saveComponentEventBatch(t,e,r)},AppProxy.prototype.onComponentActivity=function(t,e,r,n){var o=this;componentActivity.call(this,this.resolvedPromise,t,e,r,n);var a=this.getComponent(e);if(a&&a.$_internal_shouldStopBatching){var i=this.componentEventBatch[e];this.componentEventBatch[e]=void 0,Array.isArray(i)&&i.forEach((function(t){o.publicComponentEvent(e,t.eventName,t.data)}))}},AppProxy.prototype.onComponentPropertiesChanged=function(t,e){var r=this,n=this.getComponent(t);try{if(!n)throw new Error("component is not exist, error in onComponentPropertiesChanged");var o=n.properties,a=[];isObject(e)&&(Object.keys(e).forEach((function(t){var i,s=o[t],_=e[t],p=!1;(null===(i=r.lynx._switches)||void 0===i?void 0:i.enableDeepDiffProperties)?deepEqual(s,_)||(p=!0):s!==_&&(p=!0),p&&(n.data[t]=n.properties[t]=_,a.push([s,_,t]))})),a.length>0&&a.forEach((function(t){var e=__read(t,3),r=e[0],o=e[1],a=e[2],i=n._properties[a]||{},s=i.observer;isObject(i)&&(isString(s)&&(s=n[s]),"function"==typeof s&&s.call(n,o,r))})))}catch(r){var i=r||{},s=i.message,_=i.stack;this.handleError(new InternalRuntimeError("onComponentPropertiesChanged "+t+"/"+e+" error: "+s,_),r),this._appInstance.onError(s||_||"unknow error in onComponentPropertiesChanged")}},AppProxy.prototype.onComponentDatasetChanged=function(t,e){var r=this.getComponent(t);try{if(!r)throw new Error("component is not exist, error in onComponentDatasetChanged");r.dataset=e}catch(r){var n=r||{},o=n.message,a=n.stack;this.handleError(new InternalRuntimeError("onComponentDataSetChanged "+t+"/"+e+" error: "+o,a),r)}},AppProxy.prototype.onComponentInstanceChanged=function(t,e){var r=this.getComponent(t);try{if(!r)throw new Error("component is not exist, error in onComponentInstanceChanged");r.className=e.className,r.idSelector=e.id}catch(r){var n=r||{},o=n.message,a=n.stack;this.handleError(new InternalRuntimeError("onComponentInstanceChanged "+t+"/"+e+" error: "+o,a),r)}},AppProxy.prototype.updateCardData=function(t,e){var r=this;void 0===e&&(e=UpdateDataType.UPDATE);this._updateData=t;try{var n=this._appInstance;e==UpdateDataType.RESET&&(n.data={__globalProps:n.data.__globalProps},Object.keys(this._initData).forEach((function(t){n.data[t]=r._initData[t]}))),"string"==typeof t&&(t=JSON.parse(t)),Object.keys(t).forEach((function(e){var r=t[e];n.data[e]=r})),"function"==typeof n.onDataChanged&&n.onDataChanged.call(n,t)}catch(e){var o=e||{},a=o.message,i=o.stack;this.handleError(new InternalRuntimeError("updateCardData "+t+" error: "+a,i),e)}},AppProxy.prototype.updateGlobalProps=function(t){var e=this;try{var r=this._appInstance;Object.keys(t).forEach((function(r){var n=t[r];e.lynx.__globalProps[r]=n})),"function"==typeof r.onGlobalPropsChanged&&r.onGlobalPropsChanged.call(r,t)}catch(e){var n=e||{},o=n.message,a=n.stack;this.handleError(new InternalRuntimeError("updateGlobalProps "+t+" error: "+o,a),e)}},AppProxy.prototype.processCardConfig=function(t){try{var e=this._appInstance;"string"==typeof t&&(t=JSON.parse(t));var r=t.__card_config_;isObject(r)&&Object.keys(r).forEach((function(t){if("theme"===t){var n=r[t];isObject(n)&&(e.theme=n,"function"==typeof e.onThemeChanged&&e.onThemeChanged(n))}}))}catch(e){var n=e||{},o=n.message,a=n.stack;this.handleError(new InternalRuntimeError("processCardConfig "+t+" error: "+o,a),e)}},AppProxy.prototype.initCardData=function(t){this._initData=t;try{var e=this._appInstance;Object.keys(t).forEach((function(r){hasProperty(e.data,r)||(e.data[r]=t[r])}))}catch(e){var r=e||{},n=r.message,o=r.stack;n="native initCardData error in Card:  "+n,this.handleError(new InternalRuntimeError("initCardData "+t+" error: "+n,o),e)}},AppProxy.prototype.onNativeAppReady=function(t){var e=this;try{var r=!0;if(e.allRemoved&&(r=!e.allRemoved["/"+this._cardPath]),r){var n=Object.assign({},this._initData,this._updateData),o=diffData(n,this._appInstance.data);Object.keys(o).length>0&&e._nativeApp.updateData(o)}e._appInstance.cardState="ready",e._appInstance.onReady({}),pageLifetimeFun.call(e,"onReady")}catch(t){var a=t||{},i=a.message,s=a.stack;this.handleError(new InternalRuntimeError("onNativeAppReady error: "+i,s),t)}},AppProxy.prototype.callFunction=function(t,e,r){var n=this._appInstance;try{var o=n.getJSModule(t);"function"==typeof o[e]&&o[e].apply(o,r)}catch(r){var a=r||{},i=a.message,s=a.stack;this.handleError(new InternalRuntimeError("callFunction "+t+"/"+e+" error: "+i,s),r)}},AppProxy.prototype.onAppEnterBackground=function(t){try{this._appInstance.onHide(),pageLifetimeFun.call(this,"onHide")}catch(t){var e=t||{},r=e.message,n=e.stack;this.handleError(new InternalRuntimeError("onAppEnterBackground error: "+r,n),t)}},AppProxy.prototype.onAppEnterForeground=function(t){try{this._appInstance.onShow(t),pageLifetimeFun.call(this,"onShow")}catch(o){var e=o||{},r=e.message,n=e.stack;this.handleError(new InternalRuntimeError("onAppEnterForeground "+t+" error: "+r,n),o)}},AppProxy.prototype.onAppError=function(t){try{this.handleError(new InternalRuntimeError("JS error: "+t,t))}catch(o){var e=o||{},r=e.message,n=e.stack;this.handleError(new InternalRuntimeError("onAppError "+t+" error: "+r,n),o)}},AppProxy.prototype.onAppFirstScreen=function(t){try{this._appInstance.onFirstScreen(t),pageLifetimeFun.call(this,"onFirstScreen")}catch(o){var e=o||{},r=e.message,n=e.stack;this.handleError(new InternalRuntimeError("onAppFirstScreen "+t+" error: "+r,n),o)}},AppProxy.prototype.onAppReload=function(t){var e;pageLifetimeFun.call(this,"onDestroy"),null===(e=this.appInstance)||void 0===e||e.onDestroy(),this.appInstance.cardState="destroyed",this._heliumData&&clearHeliumCanvas(this),this._params.updateData=t;var r=_global.SystemInfo.enableKrypton&&this._nativeApp.enableCanvasOptimization;initCanvas(this,this.lynx.Promise,r),_global.globComponentRegistPath=this._cardPath,this.Card(this._cardParams)},AppProxy}(BaseApp);function pathProcess$1(t){var e=t.match(/(.*)\/([^/]+)?$/);return(null==e?void 0:e[1])?e[1]:"./"}function inRequire$1(t){var e=this,r=pathProcess$1(t);return function(t){var n=[],o=(r+"/"+t).split("/"),a=o.length;if("string"!=typeof t)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+t+" in app: "+e._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var _=n.join("/");return _.endsWith(".js")||(_+=".js"),e.require(_)}}function loadCard(nativeApp,params,lynx){var cardType=params.cardType,tt;try{var id=nativeApp.id;alog("load card native app id: "+id+" cardType "+cardType),tt="tt"===cardType?new AppProxy({nativeApp:nativeApp,params:params,lynx:lynx}):new ReactApp({nativeApp:nativeApp,params:params,lynx:lynx}),_global.currentAppId=id,_global.multiApps[id]=tt;var BDLynxSDKCore=_global.BDLynxSDKCore,_a=BDLynxSDKCore||{},apiInit=_a.apiInit,registerNativeEvent=_a.registerNativeEvent;if("function"==typeof apiInit){var apiInstance=apiInit.call(tt);tt.apiList=apiInstance}tt.registerModule("BDLynxAPIModule",new EventEmitter),"function"==typeof registerNativeEvent&&registerNativeEvent(tt.getJSModule("BDLynxAPIModule"));var contents=nativeApp.readDynamicComponentScripts();if(Array.isArray(contents))for(var i=0;i<contents.length;i++)eval(contents[i]);else"string"==typeof contents&&eval(contents);var appServiceName="app-service.js";if(alog("load card native app load app-service.js params.bundleSupportLoadScript "+params.bundleSupportLoadScript),params.bundleSupportLoadScript){var bundleInitReturnObj=nativeApp.loadScript(appServiceName);if(alog("load card load app-service.js loadScript success"),bundleInitReturnObj&&bundleInitReturnObj.init)bundleInitReturnObj.init({tt:tt}),alog("load card load app-service.js init success");else{var errorMessage="loadCard error: Load app_service.js failed! It return a "+bundleInitReturnObj+". There may be syntax error or file broken in app_service.js. Please check your js code with error message and stack.";reportThrowError({error:new InternalRuntimeError(errorMessage),nativeApp:nativeApp,rawError:new Error(errorMessage),__sourcemap__release__:tt.__sourcemap__release__})}}else{var jsContent=nativeApp.readScript(appServiceName);eval(jsContent),alog("load card load app-service.js eval success")}nativeApp.setCard(tt)}catch(t){var _b=t||{},message=_b.message,stack=_b.stack;reportThrowError({error:new InternalRuntimeError("loadCard error: Init app_service.js failed! Error message: "+message+". Please check your js code with error message and stack.",stack),nativeApp:nativeApp,rawError:t,__sourcemap__release__:null==tt?void 0:tt.__sourcemap__release__})}}function destroyCard(t){alog("destroy "+t),_global.multiApps[t].destroy(),delete _global.multiApps[t]}function callDestroyLifetimeFun(t){alog("callDestroyLifetimeFun "+t),_global.multiApps[t].callDestroyLifetimeFun()}function loadDynamicComponent(t,e){try{var r=t.nativeApp,n=r.loadScript("app-service.js",e);if(alog("load dynamic component app-service.js loadScript success"),n&&n.init){var o=_global.globDynamicComponentEntry;_global.globDynamicComponentEntry=e,n.init({tt:t}),alog("load dynamic component load app-service.js init success"),_global.globDynamicComponentEntry=o}else{var a="loadDynamicComponent error: Load app_service.js failed! It return a "+n+". There may be syntax error or file broken in app_service.js. Please check your js code with error message and stack.";reportThrowError({error:new InternalRuntimeError(a),nativeApp:r,rawError:new Error(a),__sourcemap__release__:t.__sourcemap__release__})}}catch(e){var i=e||{},s=i.message,_=i.stack;reportError(new InternalRuntimeError("loadDynamicComponent error: Init app_service.js failed! Error message: "+s+". Please check your js code with error message and stack.",_),t.nativeApp,{__sourcemap__release__:t.__sourcemap__release__})}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;function arrayBufferToBase64(t){var e,r=new Uint8Array(t),n=r.length,o="";for(e=0;e<n;e+=3)o+=chars[r[e]>>2],o+=chars[(3&r[e])<<4|r[e+1]>>4],o+=chars[(15&r[e+1])<<2|r[e+2]>>6],o+=chars[63&r[e+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function base64ToArrayBuffer(t){var e,r,n,o,a,i=.75*t.length,s=t.length,_=0;"="===t[t.length-1]&&(i--,"="===t[t.length-2]&&i--);var p=new ArrayBuffer(i),c=new Uint8Array(p);for(e=0;e<s;e+=4)r=lookup[t.charCodeAt(e)],n=lookup[t.charCodeAt(e+1)],o=lookup[t.charCodeAt(e+2)],a=lookup[t.charCodeAt(e+3)],c[_++]=r<<2|n>>4,c[_++]=(15&n)<<4|o>>2,c[_++]=(3&o)<<6|63&a;return p}_global.loadCard=loadCard,_global.destroyCard=destroyCard,_global.callDestroyLifetimeFun=callDestroyLifetimeFun,_global.loadDynamicComponent=loadDynamicComponent,_global.__lynxArrayBufferToBase64=arrayBufferToBase64,_global.__lynxBase64ToArrayBuffer=base64ToArrayBuffer,_global.LynxSDKCore={report:legacyReportError,reportInner:wrapInnerFunction,reportUser:wrapUserFunction}})();
//# sourceMappingURL=lynx_core.js.map
